<!doctype html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goldstine研究所 &middot; Goldstine研究所</title>

    <meta name="msvalidate.01" content="9220008783970B337CA4AE8362168354" />
    <meta name="description" content="mosuke5&#39;s blog">
    <link rel="canonical" href="https://blog.mosuke.tech/">

    <meta name="generator" content="Hugo 0.20" />
    <meta name="twitter:card" content="summary">
    
    <meta name="twitter:title" content="Goldstine研究所 &middot; Goldstine研究所">
    <meta name="twitter:description" content="mosuke5&#39;s blog">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Goldstine研究所 &middot; Goldstine研究所">
    <meta property="og:description" content="mosuke5&#39;s blog">

    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">

    <link rel="stylesheet" href="https://blog.mosuke.tech/css/all.min.css">
    <link rel="stylesheet" href="https://blog.mosuke.tech/css/mosuke5.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

    <link rel="alternate" type="application/rss+xml" title="Goldstine研究所" href="https://blog.mosuke.tech/index.xml" />
    <link rel="icon" type="image/png" href="/image/favicon.png">
</head>
<body>


<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
    <div class="header">
        <hgroup>
            <h1 class="brand-title"><a href="https://blog.mosuke.tech">Goldstine研究所</a></h1>
            <h2 class="brand-tagline"> mosuke5&#39;s blog </h2>
        </hgroup>

        <nav class="nav">
            <ul class="nav-list">
                
                
            </ul>
        </nav>
    </div>
</div>


    <div class="content pure-u-1 pure-u-md-3-4">
        <div>
            
            <div class="posts">
                
                
                <h1 class="content-subhead">23 Jan 2017, 23:37</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://blog.mosuke.tech/entry/2017/01/23/233756/" class="post-title">Cookpad TechConf2017にいってきたメモ</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">mosuke5</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-CookpadTechConf" href="https://blog.mosuke.tech/categories/cookpadtechconf">CookpadTechConf</a><a class="post-category post-category-海外進出" href="https://blog.mosuke.tech/categories/%E6%B5%B7%E5%A4%96%E9%80%B2%E5%87%BA">海外進出</a><a class="post-category post-category-機械学習" href="https://blog.mosuke.tech/categories/%E6%A9%9F%E6%A2%B0%E5%AD%A6%E7%BF%92">機械学習</a><a class="post-category post-category-スケーラビリティ" href="https://blog.mosuke.tech/categories/%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%A9%E3%83%93%E3%83%AA%E3%83%86%E3%82%A3">スケーラビリティ</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p><body>
<h1>はじめに</h1></p>

<p>CookpadTechConf2017に参加してきた。<br>
昨年は抽選に外れていけなかったのでよかった。</p>

<p><iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Ftechconf.cookpad.com%2F2017%2F" title="Cookpad TechConf 2017" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://techconf.cookpad.com/2017/">techconf.cookpad.com</a></cite></p>

<p>おなじみ<a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookpad">Cookpad</a>が年に一回行っているテクノロジーカンファレンス。<br>
１年間の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%C3%A5%AF%A5%D1%A5%C3%A5%C9">クックパッド</a>での取り組みを発表する場。</p>

<p>完全メモ書きではあるが、ご活用ください。</p>

<h1>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%C3%A5%AF%A5%D1%A5%C3%A5%C9">クックパッド</a>の取り組み</h1>

<p>セッションはたくさんあったが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%C3%A5%AF%A5%D1%A5%C3%A5%C9">クックパッド</a>が今年１年間で取り組んできた大きな内容は以下３つと感じた。</p>

<ol>
<li>海外進出</li>
<li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B5%A1%B3%A3%B3%D8%BD%AC">機械学習</a>への取り組み</li>
<li>スケールへの対応</li>
</ol>

<p>海外進出の話は今まではほとんど聞いたことなかったので、本格的に力を入れ始めたというところだろう。<br>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B5%A1%B3%A3%B3%D8%BD%AC">機械学習</a>への取り組みは去年からと明確にいっていたのでこちらもそう。<br>
最後のスケールへの対応は今までもたくさん発表してきたが、そこに大きな波がもう１つやってきた。後ほど。</p>

<h1>海外進出</h1>

<h3>Go Global</h3>

<ul>
<li>宗教、言語、気候によってサービスを変える

<ul>
<li>同じ言語圏であっても気候が違えば違う食文化がある</li>
<li>例えば<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%DA%A5%A4%A5%F3%B8%EC">スペイン語</a>圏でも、スペインと南米では全く食文化が異なる</li>
</ul>
</li>
<li>どうやってサービスを作っていくか

<ul>
<li>あたりまえ品質</li>
<li>グローバリゼーションとローカライゼーション</li>
</ul>
</li>
<li>検索の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%ED%A1%BC%A5%AB%A5%E9%A5%A4%A5%BA">ローカライズ</a>ははてしなくどろくさい</li>
<li>翻訳もとんでもなく大変

<ul>
<li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon">Amazon</a>の例だが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Kindle">Kindle</a>で"OR"で誤訳があった

<ul>
<li>「あるいは」のorなのか、「<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AA%A5%EC%A5%B4%A5%F3%BD%A3">オレゴン州</a>」のorなのか</li>
</ul>
</li>
<li>プレミアムという言葉も実は難しい

<ul>
<li>プレミアムというのは地方によってはプレミアムでないものを差別する用語として使われることもある</li>
<li>プライムやプレミアム、エクストリームなど使い分ける</li>
</ul>
</li>
</ul>
</li>
<li>国際チームは国籍がみんなばらばら

<ul>
<li>それぞれの考え方も文化も異なる</li>
<li>最終的なアウトプットだけ共有しあとはまかせるというスタイルをとっている</li>
</ul>
</li>
</ul>

<h3>Global Infrastracture</h3>

<ul>
<li>多くのリージョンへ展開している

<ul>
<li><a href="https://cookpad.com/us/regions">Choose your Country - Cookpad</a></li>
<li>でも中国は進出してない

<ul>
<li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%C3%A5%AF%A5%D1%A5%C3%A5%C9">クックパッド</a>は<a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a>絶対</li>
<li>中国市場ではやっぱり厳しさがあるようにみえる</li>
</ul>
</li>
</ul>
</li>
<li>グローバルアプリはス<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%E9%A5%C3%A5%C1">クラッチ</a>で新規開発

<ul>
<li>いまは普通の<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>アプリ</li>
<li>日本の<a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookpad">Cookpad</a>とはUIも全く異なる</li>
</ul>
</li>
<li>グローバルのインフラについて

<ul>
<li>
<code>us-east-1</code>のサーバを利用</li>
<li>データベースはAurora for <a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>
</li>
<li>Elasticache利用</li>
<li>nginx, <a class="keyword" href="http://d.hatena.ne.jp/keyword/unicorn">unicorn</a>の構成</li>
<li>CDNはFastly</li>
</ul>
</li>
<li>地域によって<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A5%E9%A5%D5%A5%A3%A5%C3%A5%AF">トラフィック</a>ピークが全く異なる

<ul>
<li>日本だとバレンタインシーズン</li>
<li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%B9%A5%E9%A5%E0">イスラム</a>では<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E9%A5%DE%A5%C0">ラマダ</a>ンと呼ばれるシーズンがある

<ul>
<li>しばらく断食していたその後に食事を楽しむ時期</li>
</ul>
</li>
</ul>
</li>
</ul>

<p><a href="https://speakerdeck.com/rejasupotaro/go-global-number-cookpadtechconf-2017">Go Global - #CookpadTechconf 2017 // Speaker Deck</a><br>
<a href="https://speakerdeck.com/sorah/building-infrastructure-for-our-global-service">Building infrastructure for our global service // Speaker Deck</a></p>

<h1>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B5%A1%B3%A3%B3%D8%BD%AC">機械学習</a>へのとりくみ</h1>

<ul>
<li>2016/07/01 <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%C3%A5%AF%A5%D1%A5%C3%A5%C9">クックパッド</a>研究開発部設立</li>
<li>2016/10/05 アプリ「料理きろく」公開

<ul>
<li><a href="https://itunes.apple.com/jp/app/wu-liaode-yin-le-dong-hua/id931374280?mt=8&amp;ign-mpt=uo%3D4">お料理アルバム byクックパッド ~料理写真とレシピをプライベート記録~を App Store で</a></li>
</ul>
</li>
<li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/GPU">GPU</a><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>を使って研究環境を構築

<ul>
<li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Nvidia">Nvidia</a>ドライバーのインストールからそのセットアップまでハマるポイント多すぎる</li>
<li>packerを使って研究用AMIを用意するなどしている</li>
</ul>
</li>
<li>正直まだまだこれからの状態</li>
<li>現状は、料理か否かの判定のみに注力</li>
<li>料理の種類の判定などはこれから頑張りたい</li>
</ul>

<p><a href="https://speakerdeck.com/ayemos/real-world-machine-learning">Real World Machine Learning // Speaker Deck</a></p>

<h1>スケーラビリティへの対応</h1>

<ul>
<li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>アプリでは世界最大規模

<ul>
<li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E2%A5%CE%A5%EA%A5%B9">モノリス</a>ティックに構築して巨大化しすぎた。。。</li>
</ul>
</li>
<li>サービスの分割化、マイクロサービス化を促進</li>
<li>マイクロサービス化、それゆえにおこる問題が起きてくる

<ul>
<li>サービス間の連携がとても重要に</li>
<li>次の仕組みを使って連携を強化

<ul>
<li>障害を制御する =&gt; Expeditor</li>
<li>障害を予防する =&gt; Pact</li>
</ul>
</li>
<li>Expeditor（内製ソフトウェア）

<ul>
<li>1)サーキットブレイカー</li>
<li>2)並列処理</li>
<li>3)リトライ処理</li>
<li>もともとは並列処理のために作ったがサーキットブレイカーの機能が重宝</li>
<li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/netflix">netflix</a>の<code>Netflix/Hystrix</code>にインスパイア</li>
</ul>
</li>
<li>Pact (<a href="https://docs.pact.io/">https://docs.pact.io/</a>)

<ul>
<li>サービス間の連携テストを行うソフトウェア</li>
<li>これは外部開発のソフトウェアだが周辺ツールは内製</li>
</ul>
</li>
</ul>
</li>
<li>マイクロサービス化したのでDockerでサービスのポータビリティも上げた

<ul>
<li>Dockerをより良く使うためにHakoというDockerデプロイツールも開発</li>
</ul>
</li>
<li>その他、スケールに対応するために幾つかのソフトウェアを内製

<ul>
<li>Kuroko2</li>
<li>barbeque</li>
</ul>
</li>
<li>これらの内製ソフトウェアはすべて<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>で書いている

<ul>
<li>なぜ<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>か？</li>
<li>好きというのもあるが、統一することで品質やスキルの担保ができる</li>
</ul>
</li>
<li>でも<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>には速度の問題などあることは承知。。。

<ul>
<li>そこで、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>自体の速度改善に貢献しようとした</li>
<li><a href="https://info.cookpad.com/pr/news/press_2017_0123">クックパッド、フルタイムRubyコミッター・笹田耕一氏を採用 Rubyの改善・開発とサービスのユーザー体験向上を加速 | クックパッド株式会社</a></li>
<li>「<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AA%A1%BC%A5%D7%A5%F3%A5%BD%A1%BC%A5%B9">オープンソース</a>へのタダ乗りはしない。コミュニティへの貢献がビジネスも成長させる」</li>
</ul>
</li>
<li>すべてのデータをRedshiftに移行

<ul>
<li>今まで<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B5%A1%BC%A5%C9%A5%D1%A1%BC%A5%C6%A5%A3">サードパーティ</a>のDWHも利用していたがRedshiftに移行</li>
<li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A5%AF%A5%BB%A5%B9%A5%ED%A5%B0">アクセスログ</a>もユーザデータもすべて</li>
<li>ログとDBデータがJoinできる素晴らしさ</li>
</ul>
</li>
<li>スポット<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>の利用で<a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a>サーバのコストを60％下げた</li>
</ul>

<p><p><a href="https://speakerdeck.com/mirakui/cookpad-under-a-microscope">Cookpad Under a Microscope // Speaker Deck</a><br>
<a href="https://speakerdeck.com/yoshiori/cookpad-awakens">Cookpad awakens // Speaker Deck</a><br>
<a href="https://speakerdeck.com/ryotarai/spot-instances-in-cookpad-number-cookpadtechconf-2017">Spot Instances in Cookpad #CookpadTechConf 2017 // Speaker Deck</a></p>
</body></p>

                    </div>
                </section>
                
                
                
                <h1 class="content-subhead">04 Jan 2017, 22:35</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://blog.mosuke.tech/entry/2017/01/04/223544/" class="post-title">クラウド上でのWordPressのスケールアウトを考える</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">mosuke5</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-WordPress" href="https://blog.mosuke.tech/categories/wordpress">WordPress</a><a class="post-category post-category-クラウド" href="https://blog.mosuke.tech/categories/%E3%82%AF%E3%83%A9%E3%82%A6%E3%83%89">クラウド</a><a class="post-category post-category-AWS" href="https://blog.mosuke.tech/categories/aws">AWS</a><a class="post-category post-category-Alibaba Cloud" href="https://blog.mosuke.tech/categories/alibaba-cloud">Alibaba Cloud</a><a class="post-category post-category-分散" href="https://blog.mosuke.tech/categories/%E5%88%86%E6%95%A3">分散</a><a class="post-category post-category-スケールアウト" href="https://blog.mosuke.tech/categories/%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%AB%E3%82%A2%E3%82%A6%E3%83%88">スケールアウト</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p><body>
<p>複数台サーバでの<a class="keyword" href="http://d.hatena.ne.jp/keyword/WordPress">WordPress</a>の構築・運用について考える。<br>
実際に、とある<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%E9%A5%A6%A5%C9">クラウド</a>で分散環境の<a class="keyword" href="http://d.hatena.ne.jp/keyword/WordPress">WordPress</a>を構築したのでその知見をまとめる。<br>
なるべく特定の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%E9%A5%A6%A5%C9">クラウド</a>に特価しないものとして記載したい。</p></p>

<h1>やりたいこと</h1>

<ul>
<li>スケールアウトできる<a class="keyword" href="http://d.hatena.ne.jp/keyword/WordPress">WordPress</a>環境を作る</li>
<li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/SSL">SSL</a>に対応する</li>
<li>HTTP/2に対応する</li>
<li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a>などの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%E9%A5%A6%A5%C9">クラウド</a>環境で構築する</li>
</ul>

<h1><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A1%BC%A5%AD%A5%C6%A5%AF%A5%C1%A5%E3">アーキテクチャ</a></h1>

<p>まず先に全体の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A1%BC%A5%AD%A5%C6%A5%AF%A5%C1%A5%E3">アーキテクチャ</a>図から示す。<br>
これから各項目について解説していく。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="/image/20170104185455.png"></span></p>

<h1>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/SSL">SSL</a>・HTTP/2への対応</h1>

<p>まず<a class="keyword" href="http://d.hatena.ne.jp/keyword/SSL">SSL</a>への対応だが、通常ならばロードバランサを<a class="keyword" href="http://d.hatena.ne.jp/keyword/SSL">SSL</a>の終端とし下記のような構成にすることが多いだろう。<br>
この場合はロードバランサをL7のものとして稼働させる。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="/image/20170104190001.png"></span></p>

<p>しかし、HTTP/2に対応しようと思うと事情は異なってくる。<br>
（もちろん、最近では<a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a>のALBのようにHTTP/2に対応する製品がでてきているのは承知だが。）<br>
現在の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D1%A5%D6%A5%EA%A5%C3%A5%AF%A5%AF%A5%E9%A5%A6%A5%C9">パブリッククラウド</a>で利用できるロードバランサの多くはまだHTTP/2に対応していない。<br>
そのため、ロードバランサをL4として稼働させ、配下のWebサーバにてHTTP/2を処理する必要がでてくる。<br>
この場合、ロードバランサは<a class="keyword" href="http://d.hatena.ne.jp/keyword/TCP">TCP</a>でポート443を待ち受けるようにし、配下のWebサーバへポート443のままでフォワードすればいい。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="/image/20170104185953.png"></span></p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%E9%A5%A6%A5%C9">クラウド</a>環境ではWebサーバがスケールすることは前提にいれることがおおい。<br>
そのため、この場合の<a class="keyword" href="http://d.hatena.ne.jp/keyword/SSL%BE%DA%CC%C0%BD%F1">SSL証明書</a>はN台に対応した製品を買う必要がある。<br>
例えば以下のような製品など。</p>

<ul>
<li><a href="https://www.cybertrust.ne.jp/sureserver/productinfo/cloud.html">SureServer for クラウド｜Cybertrust.ne.jp</a></li>
</ul>

<h1>データベースの分離</h1>

<p>分散環境での<a class="keyword" href="http://d.hatena.ne.jp/keyword/Wordpress">Wordpress</a>では共通したコンテンツを配信するため、データベースはもちろんWebサーバとは分離したほうがいい。<br>
それぞれのWebサーバは共通のデータベースを見に行くべきだ。<br>
データベースを自前で<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BE%E9%C4%B9%B2%BD">冗長化</a>しても構わないが、それなりの運用コストがかかることは容易に想像がつくので、<br>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%E9%A5%A6%A5%C9">クラウド</a>のマネージドデータベースサービスを利用した。</p>

<ul>
<li><a href="https://aws.amazon.com/jp/rds/">Amazon RDS（クラウドでのリレーショナルデータベースサービス） | AWS</a></li>
<li><a href="https://jp.aliyun.com/product/apsaradb-for-rds">ApsaraDB for RDS - データベースホスティング | Alibaba Cloud</a></li>
</ul>

<h1>管理画面</h1>

<p>管理画面のみを分離する<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A1%BC%A5%AD%A5%C6%A5%AF%A5%C1%A5%E3">アーキテクチャ</a>も考えられるが、ここではそうしないこととする。<br>
管理画面へのログインセッションの保持は、別途KVS(Redisや<a class="keyword" href="http://d.hatena.ne.jp/keyword/Memcached">Memcached</a>)に保存してもいいと思う。<br>
ですが、WordPress4.0以降ではデフォルトでは<a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>へセッションを保存するので必須の対応ではないといえる。</p>

<p><iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2FWordPress%2FWordPress%2Fblob%2Fdd6da701b286579819cd6aa518aa2d7018efd759%2Fwp-includes%2Fclass-wp-user-meta-session-tokens.php" title="WordPress/WordPress" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/WordPress/WordPress/blob/dd6da701b286579819cd6aa518aa2d7018efd759/wp-includes/class-wp-user-meta-session-tokens.php">github.com</a></cite></p>

<h1>記事で使うアップロード画像などの対応</h1>

<p>管理画面から記事を投稿するとする。<br>
記事のデータはデータベースに保存されるためどのWebサーバからも記事を参照できる。<br>
しかし、記事に含まれる画像データはどうだろうか。</p>

<p>通常の<a class="keyword" href="http://d.hatena.ne.jp/keyword/Wordpress">Wordpress</a>では管理画面サーバの<code>/wp-content/uploads</code>以下に画像を保存する。<br>
複数台Webサーバがある状態で、たまたまアクセスしているサーバに画像を保存しても、他のサーバからは参照することができない。</p>

<p>これに対するソリューションはいくつかあるだろう。<br>
例えば、<a class="keyword" href="http://d.hatena.ne.jp/keyword/rsync">rsync</a>などを使って他のサーバと画像ファイルを同期するとか、画像用のストレージを用意し<a class="keyword" href="http://d.hatena.ne.jp/keyword/NFS">NFS</a>で参照するとか。<br>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BE%E9%C4%B9%B2%BD">冗長化</a>の観点からもここはオブジェクトストレージのサービスを利用するのがいいだろう。</p>

<p>例えば、下記のような製品だ。</p>

<ul>
<li><a href="https://aws.amazon.com/jp/s3/">Amazon S3 (スケーラブルなクラウドストレージサービス ) | AWS</a></li>
<li><a href="https://jp.aliyun.com/product/oss">Object Storage Service (OSS) - Alibaba Cloud の拡張性に優れた安全なクラウドストレージ | Alibaba Cloud</a></li>
</ul>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%E9%A5%A6%A5%C9">クラウド</a>のオブジェクトストレージと<a class="keyword" href="http://d.hatena.ne.jp/keyword/WordPress">WordPress</a>を連携する<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%E9%A5%B0%A5%A4%A5%F3">プラグイン</a>は多く出ている。</p>

<ul>
<li><a href="https://wordpress.org/plugins/nephila-clavata/">Nephila clavata — WordPress Plugins</a></li>
</ul>

<h1>デプロイへの対応</h1>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Wordpress">Wordpress</a>のコードのデプロイ、Webサーバの設定変更などにどう対応するか。<br>
ツールはなんでもいいが（<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B7%A5%A7%A5%EB%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">シェルスクリプト</a>でもいいし、Ansible,Chefなどでも）、<br>
デプロイツールなど用いて全台サーバにデプロイできるようにしておくといいだろう。あたりまえ。<br>
影響の大きいデプロイをするときは<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%ED%A1%BC%A5%C9%A5%D0%A5%E9%A5%F3%A5%B5%A1%BC">ロードバランサー</a>から切り離してデプロイ、テストとやるといいと思う。<br>
あるいは、新しく構築（デプロイ）した別のWebサー<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%A4">バイ</a>ンスタンスを用意し、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%ED%A1%BC%A5%C9%A5%D0%A5%E9%A5%F3%A5%B5%A1%BC">ロードバランサー</a>で向き先を変更してもいい。</p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%ED%A1%BC%A5%C9%A5%D0%A5%E9%A5%F3%A5%B5%A1%BC">ロードバランサー</a>配下のWebサーバはプライベートネットワークに配置しておりインターネットから直接アクセスできない。<br>
そのため、デプロイサーバを用意することでデプロイできるようにした。<br>
あるいは、踏み台サーバを用意して、多段<a class="keyword" href="http://d.hatena.ne.jp/keyword/SSH">SSH</a>を使ってもいいかもしれない。</p>

<h1>さいごに</h1>

<p><p>他にも、工夫した点などはあるが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/WordPress">WordPress</a>のスケールアウトという点に絞って簡単にまとめた。<br>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/OSS">OSS</a>の利用は簡単だが、そのスケールや<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BE%E9%C4%B9%B2%BD">冗長化</a>は毎度悩まさせると感じる。<br>
以前もGitlabを運用してた時に<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BE%E9%C4%B9%B2%BD">冗長化</a>をどうするか考えていたのを思い出す。</p>
</body></p>

                    </div>
                </section>
                
                
                
                <h1 class="content-subhead">25 Dec 2016, 14:27</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://blog.mosuke.tech/entry/2016/12/25/142744/" class="post-title">「嵐」 2016年振り返り</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">mosuke5</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-パブリッククラウド" href="https://blog.mosuke.tech/categories/%E3%83%91%E3%83%96%E3%83%AA%E3%83%83%E3%82%AF%E3%82%AF%E3%83%A9%E3%82%A6%E3%83%89">パブリッククラウド</a><a class="post-category post-category-Alibaba Cloud" href="https://blog.mosuke.tech/categories/alibaba-cloud">Alibaba Cloud</a><a class="post-category post-category-SBクラウド" href="https://blog.mosuke.tech/categories/sb%E3%82%AF%E3%83%A9%E3%82%A6%E3%83%89">SBクラウド</a><a class="post-category post-category-振り返り" href="https://blog.mosuke.tech/categories/%E6%8C%AF%E3%82%8A%E8%BF%94%E3%82%8A">振り返り</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p><body>
<p>だいぶお久しぶりのブログ。
そして恒例の年振り返りブログ。ついに2016年も終わってしまう。</p></p>

<p>というわけで2016年を振り返りたいと思う。<br>
一応このサイトは技術ブログのはずなんだけど、プライベートのことが大いに混ざったポエムになってしまった。</p>

<h1>なんの変哲もないはじまり</h1>

<p>2016年のはじめのほう。振り返ってもとくに振り返ることがあまりないくらい変哲もない日々だった。<br>
嵐の前の静けさだったと今思う。</p>

<h1>TDD研修、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%DE%A5%CD">プロマネ</a>研修</h1>

<p>後述するが8月までは、社内システムのエンジニアとして活動していた。<br>
いつもどおり、内製開発のチームをどう強くするかばかり考え働いていた。</p>

<p>そんななか、新しい開発チームの模索のために部署を代表としてTDD（<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C6%A5%B9%A5%C8%B6%EE%C6%B0%B3%AB%C8%AF">テスト駆動開発</a>）の研修や、<br>
プロジェクトマネージャーの研修など受けさせてもらった。</p>

<p>そのなかでもTDD研修はとても印象深い。<br>
なぜなら、私が気に入っていた「<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>による<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%B6%A5%A4%A5%F3%A5%D1%A5%BF%A1%BC%A5%F3">デザインパターン</a>」の翻訳者の一人が講師だったからだ。<br>
さらには、研修の受講生は2人しかおらず、徹底してTDDを実践できた。<br>
こんな恵まれた外部研修があるもんかと、感心したのを思い出す。</p>

<p></p>
<div class="hatena-asin-detail">
<a href="http://www.amazon.co.jp/exec/obidos/ASIN/4894712857/hatena-blog-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/41PNvUxHtgL._SL160_.jpg" class="hatena-asin-detail-image" alt="Rubyによるデザインパターン" title="Rubyによるデザインパターン"></a><div class="hatena-asin-detail-info">
<p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4894712857/hatena-blog-22/">Rubyによるデザインパターン</a></p>
<ul>
<li>
<span class="hatena-asin-detail-label">作者:</span> Russ Olsen,ラス・<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AA%A5%EB%A5%BB%A5%F3">オルセン</a>,小<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CE%D3%B7%F2">林健</a>一,菅野裕,吉野雅人,山岸夢人,小島努</li>
<li>
<span class="hatena-asin-detail-label">出版社/メーカー:</span> ピアソン桐原</li>
<li>
<span class="hatena-asin-detail-label">発売日:</span> 2009/04/01</li>
<li>
<span class="hatena-asin-detail-label">メディア:</span> 単行本</li>
<li>
<span class="hatena-asin-detail-label">購入</span>: 13人 <span class="hatena-asin-detail-label">クリック</span>: 220回</li>
<li><a href="http://d.hatena.ne.jp/asin/4894712857/hatena-blog-22" target="_blank">この商品を含むブログ (67件) を見る</a></li>
</ul>
</div>
<div class="hatena-asin-detail-foot"></div>
</div>

<h1>Gem公開、ATP-stat開発</h1>

<p>会社のとあるプロジェクトで<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>使うことになり、<br>
趣味がてらに<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>を使ってATP-statというサービスを開発していた。<br>
正直、ほんとに趣味で作ったものでクオリティは全く高くないし、最近はメンテもできていない。</p>

<p><a href="http://atpstat.org/">AtpStat</a></p>

<p>また、このサービスに利用する仕組みをAtpScraperというGemにして公開した。<br>
これは、せっかく受けたTDD研修を活かして、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C6%A5%B9%A5%C8%B6%EE%C6%B0%B3%AB%C8%AF">テスト駆動開発</a>で行ったりしていた。</p>

<p><iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fmosuke5%2Fatp_scraper" title="mosuke5/atp_scraper" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/mosuke5/atp_scraper">github.com</a></cite></p>

<h1>嵐</h1>

<p>と、まあさほどいままでと変わらない感じの日々を送っていた。<br>
だが、6月くらいから嵐が吹き始める。<br>
プライベートでかなりショッキングなことがあった。ショッキングであると同時に生活がだいぶ変わるようなこと。  <br>
それだけでもショッキングではあるのだけれど、その出来事はなにかのトリガーを引いてしまったようだ。<br>
世界線が変動したのかもしれない。</p>

<h1>異動</h1>

<p>まず、ショッキングな出来事からわずか1週間後に、社内転職の結果がでた。<br>
詳しくは下記のブログを読んでほしいが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D1%A5%D6%A5%EA%A5%C3%A5%AF%A5%AF%A5%E9%A5%A6%A5%C9">パブリッククラウド</a>を提供する新規事業を行う会社に行くことになったのだ。</p>

<p><a href="/entry/2016/07/29/180000">社内システム開発からパブリッククラウドの会社へジョインします - Goldstine研究所</a></p>

<h1>仕事環境の変化</h1>

<p>仕事の環境は劇的に変わった。正直何もかもが違うといっても過言ではない。<br>
変わった項目をまとめてみた。</p>

<table>
<thead>
<tr>
<th style="text-align:left;">項目</th>
<th style="text-align:left;">前の仕事</th>
<th style="text-align:left;">今の仕事</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">システム種別</td>
<td style="text-align:left;">ネットワーク監視システム</td>
<td style="text-align:left;"><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D1%A5%D6%A5%EA%A5%C3%A5%AF%A5%AF%A5%E9%A5%A6%A5%C9">パブリッククラウド</a></td>
</tr>
<tr>
<td style="text-align:left;">職種</td>
<td style="text-align:left;"><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B7%A5%B9%A5%C6%A5%E0%A5%A8%A5%F3%A5%B8%A5%CB%A5%A2">システムエンジニア</a></td>
<td style="text-align:left;">セールスエンジニア？</td>
</tr>
<tr>
<td style="text-align:left;">組織規模</td>
<td style="text-align:left;">大組織の中の１部署で100人程度</td>
<td style="text-align:left;">会社全体で数十人</td>
</tr>
<tr>
<td style="text-align:left;">チーム</td>
<td style="text-align:left;">エンジニアのみ</td>
<td style="text-align:left;">エンジニア、営業、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DE%A1%BC%A5%B1%A5%C6%A5%A3%A5%F3%A5%B0">マーケティング</a>など</td>
</tr>
<tr>
<td style="text-align:left;">お客様</td>
<td style="text-align:left;">社内</td>
<td style="text-align:left;">社外</td>
</tr>
<tr>
<td style="text-align:left;">人</td>
<td style="text-align:left;">ほぼ100%日本人</td>
<td style="text-align:left;">半分くらい外国人</td>
</tr>
<tr>
<td style="text-align:left;">英語</td>
<td style="text-align:left;">利用しない</td>
<td style="text-align:left;">飛び交ってる</td>
</tr>
</tbody>
</table>

<h1>実際の仕事</h1>

<h4>セールスエンジニア</h4>

<p>最初に断っておくが、今の職種をセールスエンジニアというと少し語弊はあるのだが、<br>
そういう一面があることは確かなのでそういうことにしておく。</p>

<p>今までやってきた開発エンジニアとはまったく異なった難しさを感じている。<br>
お客さんはシステムを開発運用する現場のエンジニアの方であり何かしらに課題点を感じている人たちだ。<br>
その課題についてソリューションを提案する必要があるわけであり、実際に自分が経験したことのないレベルで語ることは難しい。<br>
自分が売る製品に知っているのは当たり前であり、それ以上に運用現場のことについて精通していてこそ仕事になる感がある。<br>
職種的には運用現場から離れることになるわけだが、そこに精通し続ける必要があるのはとても難しさを感じとともに、だからこその価値と感じる。</p>

<p>どうやって現場感覚も失わないでいるか、課題の１つである。</p>

<p>そういえばこんな記事ありましたね。<br>
<a href="https://job-draft.jp/articles/70">はてなの中でたった1人！Mackerelを支える「セールスエンジニア」って何だ!?｜転職ドラフトReport</a></p>

<h4>サービスローンチ</h4>

<p>異動したときの会社のミッションはAlibaba Cloudの日本リージョンの開設だ。<br>
とにかくそれに向けてもろもろの準備をしてきた。<br>
まずは、リリースできたので宣伝しておきます(笑)</p>

<p><iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fjp.aliyun.com%2F" title="クラウドプロダクト、サービス、ソリューションの統合スイート | Alibaba Cloud" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://jp.aliyun.com/">jp.aliyun.com</a></cite></p>

<p><iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.sbcloud.co.jp%2F" title="SBクラウド株式会社｜SB Cloud Corp." class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://www.sbcloud.co.jp/">www.sbcloud.co.jp</a></cite></p>

<h1>Gihyoデビュー</h1>

<p>日本リージョンのリリースに伴って、Gihyoにデビューしました。<br>
あとSoftwareDesignとWed+DB Pressに掲載されてます。みんなみてね。</p>

<p><iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Fgihyo.jp%2Fadmin%2Fserial%2F01%2Fsb_cloud%2F0001" title="いよいよ日本上陸！！ 現場のエンジニアが語る，「Alibaba Cloud」の魅力と可能性：世界有数のEC企業とソフトバンクが手を組んだクラウドサービス―いま注目される「Alibaba Cloud」の可能性" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://gihyo.jp/admin/serial/01/sb_cloud/0001">gihyo.jp</a></cite></p>

<h1>英語</h1>

<p>コメント省略します。がんばりゅ…</p>

<h1>ISUCON6</h1>

<p>念願のISUCON6に参加した。圧倒的な力不足を痛感。<br>
力不足を実感したこと自体とてもいいことだったし、またISUCON対策で得た知見は確実にいいものとなっているのでよし。<br>
来年も出れたらリベンジしたいです。</p>

<p><a href="/entry/2016/09/19/172009/">ISUCON6予選で惨敗した. 足りなかったのは&rsquo;Courage&rsquo; - Goldstine研究所</a></p>

<h1>脱<a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac">Mac</a>
</h1>

<p>長年<a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac">Mac</a>を使ってたけどやめた。
本当は新<a class="keyword" href="http://d.hatena.ne.jp/keyword/MacBook%20Pro">MacBook Pro</a>が出たら買おうと思っていたんだけれど、<br>
USB Tpye-Cしかないことと値段の高さに<a class="keyword" href="http://d.hatena.ne.jp/keyword/ThinkPad">ThinkPad</a>をかってしまった。<br>
この件については別途ブログを書きたいと思う。</p>

<p><a href="http://shopap.lenovo.com/jp/notebooks/thinkpad/t-series/t460s/">ThinkPad T460s - 14.0型　ハイパフォーマンス・スリム・モバイル・ノートブックTシリーズ| レノボジャパン</a></p>

<p>脱<a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac">Mac</a>が目的というよりは、一度いい機会なので<a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac">Mac</a>を離れてみようという感じ。</p>

<h4>今のPC状況</h4>

<table>
<thead>
<tr>
<th style="text-align:left;">種類</th>
<th style="text-align:left;">PC</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">会社</td>
<td style="text-align:left;"><a class="keyword" href="http://d.hatena.ne.jp/keyword/MacBook%20Pro">MacBook Pro</a></td>
</tr>
<tr>
<td style="text-align:left;">自宅ノート</td>
<td style="text-align:left;">
<a class="keyword" href="http://d.hatena.ne.jp/keyword/ThinkPad">ThinkPad</a> T460S Windows10</td>
</tr>
<tr>
<td style="text-align:left;">自宅デスクトップ</td>
<td style="text-align:left;">
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BC%AB%BA%EEPC">自作PC</a> Ubuntu16.04</td>
</tr>
</tbody>
</table>

<h1>一人暮らし</h1>

<p>一人暮らしも決めた。引っ越し自体は2月予定だが、物件は決めて申し込みした。<br>
なんだろう、勢いでこういうことになった。</p>

<h1>最後に</h1>

<p>今年は気持ちの面、生活の面、仕事の面といろいろと変化が大きかった。<br>
これで嵐は吹き終わるのだろうか。それとも続くのだろうか。<br>
それはわからないけれど、次に来る変化も受け止め楽しむことにする。</p>

<h4>去年の抱負的なこと</h4>

<p>せっかくなので去年の振り返りブログに書いてあった抱負的なことを振り返ってみる。<br>
あんまり達成度はよくないけど、それ以上にいろいろあったからいいか。</p>

<table>
<thead>
<tr>
<th style="text-align:left;">項目</th>
<th style="text-align:left;">達成</th>
<th style="text-align:left;">コメント</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Vim">Vim</a>::Factoryを自分が使いたいと思うようなサービスにする</td>
<td style="text-align:left;">×</td>
<td style="text-align:left;">検討したが、サービスの方向性を見失った</td>
</tr>
<tr>
<td style="text-align:left;">
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Vim">Vim</a>::Factoryをベースにより自分たちが学習できる環境を作る</td>
<td style="text-align:left;">△</td>
<td style="text-align:left;">基盤は勉強材料としては活躍している</td>
</tr>
<tr>
<td style="text-align:left;">引き続き、インフラ系エンジニア？っぽい感じで邁進する</td>
<td style="text-align:left;">〇</td>
<td style="text-align:left;">現場のエンジニアではないが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%E9%A5%A6%A5%C9">クラウド</a>インフラよりで頑張ってる</td>
</tr>
<tr>
<td style="text-align:left;">ISUCONにでます（あれば…）</td>
<td style="text-align:left;">〇</td>
<td style="text-align:left;">結果は惨敗</td>
</tr>
</tbody>
</table>

<h4>来年の抱負的なこと</h4>

<p>大きく2つの面で頑張りたいと思ってる。<br>
１つは、技術面の話。<br>
今の職種は現場の開発エンジニアでもインフラエンジニアでもない。
しかし、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D1%A5%D6%A5%EA%A5%C3%A5%AF%A5%AF%A5%E9%A5%A6%A5%C9">パブリッククラウド</a>を使うのは現場エンジニアであり、その感覚を忘れてはいけないと常に思っている。
プライベートでは今まで通り何らかの形で開発エンジニアをやっていたいと思う。</p>

<p>また、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D1%A5%D6%A5%EA%A5%C3%A5%AF%A5%AF%A5%E9%A5%A6%A5%C9">パブリッククラウド</a>はシステムを開発・運用していく中で必要なサービスが盛り込まれている。<br>
今まで以上に幅広い視野を持ってテクノロジーと向き合わなければいけない。<br>
トレンドやツールの使い方とかに流されない、基礎的な部分をきちんとみていきたい。</p>

<p>2つは、技術面以外の話。<br>
我々の仕事はシステムの開発ではなく、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D1%A5%D6%A5%EA%A5%C3%A5%AF%A5%AF%A5%E9%A5%A6%A5%C9">パブリッククラウド</a>のビジネスを技術面から理解し支援することが大事。<br>
そして、サービス利用者のビジネスについても技術面から理解し支援しなければいけない。<br>
じゃ、なにをするのかっていうと難しいんだけど、テクノロジーの範囲を超えてビジネスモデルなどに意識してみようと思う。</p>

<p><p>そんじゃーね。</p>
</body></p>

                    </div>
                </section>
                
                
                
                <h1 class="content-subhead">02 Oct 2016, 21:24</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://blog.mosuke.tech/entry/2016/10/02/212420/" class="post-title">三葉よ、サーバーレス、それもまた結び。</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">mosuke5</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-serverless" href="https://blog.mosuke.tech/categories/serverless">serverless</a><a class="post-category post-category-サーバレス" href="https://blog.mosuke.tech/categories/%E3%82%B5%E3%83%BC%E3%83%90%E3%83%AC%E3%82%B9">サーバレス</a><a class="post-category post-category-クラウド" href="https://blog.mosuke.tech/categories/%E3%82%AF%E3%83%A9%E3%82%A6%E3%83%89">クラウド</a><a class="post-category post-category-lamda" href="https://blog.mosuke.tech/categories/lamda">lamda</a><a class="post-category post-category-FaaS" href="https://blog.mosuke.tech/categories/faas">FaaS</a><a class="post-category post-category-ServerlessConf" href="https://blog.mosuke.tech/categories/serverlessconf">ServerlessConf</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p><body>
<p>タイトルちょっとふざけました。  (が、半分本気。最後の方でわかる。)</p></p>

<p><a href="http://tokyo.serverlessconf.io/">ServerlessConf Tokyo</a>に参加してきた。<br>
今年8月から<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D1%A5%D6%A5%EA%A5%C3%A5%AF%A5%AF%A5%E9%A5%A6%A5%C9">パブリッククラウド</a>の事業に異動していて、<br>
開発者の立場より<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%E9%A5%A6%A5%C9">クラウド</a>提供側の立場として参加してきたので、また面白かった。</p>

<p>せっかくなので、自分なりにサーバレスについてまとめる。<br>
新しいことというよりは、自分の中での整理した感じ。</p>

<h1>1. サーバレスってなんだっけ</h1>

<p>カンファレンスの中でもサーバレスの定義についてはいろいろな意見がでていた。<br>
Martin Fowlerのブログではサーバレスの定義として下記２つが書いてある。</p>

<ul>
<li>BaaS (Backend as a Service) : ex) firebase</li>
<li>FaaS (Function as a Service) : ex) <a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a> Lambda</li>
</ul>

<p><iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Fmartinfowler.com%2Farticles%2Fserverless.html" title="Serverless Architectures" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://martinfowler.com/articles/serverless.html">martinfowler.com</a></cite></p>

<p>ですが、ここでは焦点を絞って話すためにもFaaSということにしておく。<br>
主にFaaSについて話したいのと、BaaSもいれてしまうと<a class="keyword" href="http://d.hatena.ne.jp/keyword/SaaS">SaaS</a>もサーバレスとかややこしいことになるので。</p>

<h2>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a> Lambda</h2>

<p>なんといってもサーバレスの概念を推し進めたのは<a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a> Lambdaでしょう。<br>
説明はいまさら不要だと思うが、少しだけ。</p>

<blockquote><p>コードを <a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a> Lambda にアップロードすると、サービスが <a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a> インフラストラクチャを使用してコードの実行を代行するコンピューティングサービスです。コードをアップロードして、Lambda 関数と呼ばれる関数を作成することで、<a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a> Lambda がコードを実行するサーバーのプロビジョニングおよび管理を行います。(<a href="https://aws.amazon.com/jp/lambda/details/">https://aws.amazon.com/jp/lambda/details/</a>)</p></blockquote>

<p>課金モデルは関数呼び出した回数、および実行に利用したコンピュートのスペックによって決まる。<br>
また特徴的なことは、<a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a>の他のサービスで発生したイベントをトリガーに実行できること。<br>
例えば、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon%20S3">Amazon S3</a>にファイルアップロードされたことをトリガーにLambdaを実行できるのだ。</p>

<h2>サーバレスの特徴</h2>

<p>サーバレス自体そしてサーバレスで実装することの特徴しては下記がある。</p>

<ol>
<li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%E9%A5%A6%A5%C9">クラウド</a>上のイベントを契機に実行できる</li>
<li>実行環境は、immutableで時間が立つと消える</li>
<li>実行環境は独立していて、コードは基本的にstatelessである</li>
<li>上記のようにimmutableでstatelessな構造につくるからこそスケールしやすい</li>
</ol>

<h1>2. どんな用途で利用しているか</h1>

<h2>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%E9%A5%A6%A5%C9">クラウド</a>基盤のイベントをトリガーとして</h2>

<p>個人的に一番強力だと思っている使い方。上で説明したとおりだが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%E9%A5%A6%A5%C9">クラウド</a>上のプロダクトに対してのイベントをトリガーに処理を行うことができる。<br>
例えばこんな場合を想定してみよう。</p>

<p>ユーザが写真をアップロードするサービスで、アップロードした写真にたいして何かしらの画像解析をしてメタ情報を持ちたいとする。<br>
ざっと従来のやりかただと２つくらいやり方が思い浮かぶ。</p>

<h4>(1) アップロードするたびに<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A5%D7%A5%EA%A5%B1%A1%BC%A5%B7%A5%E7%A5%F3%A5%B5%A1%BC%A5%D0">アプリケーションサーバ</a>で画像解析をする</h4>

<ul>
<li>解析にほとんど時間がかからない場合などはこれでいいと思う</li>
<li>時間がかかるようなだとユーザへのレスポンスが遅くなる</li>
<li>速くしようと思うとスケールアップで対応するしかない（やばい）</li>
</ul>

<h4>(2) <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%C3%A5%C1%BD%E8%CD%FD">バッチ処理</a>でやる</h4>

<ul>
<li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%C3%A5%C1%BD%E8%CD%FD">バッチ処理</a>で画像解析はまとめてやる。一番よくあるのでは？</li>
<li>例えば５分に一度の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%C3%A5%C1%BD%E8%CD%FD">バッチ処理</a>で、５分間にたまった写真にたいしてまとめて処理する</li>
<li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%C3%A5%C1%BD%E8%CD%FD">バッチ処理</a>でまとめて処理した場合、どこかでコケたときが辛い</li>
<li>この例ならそうでもないが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%C3%A5%C1%BD%E8%CD%FD">バッチ処理</a>ではたいていスケールアウトが辛い</li>
</ul>

<p>このケースに対してLambdaであればどうなるか。<br>
1000件のアップロードに対して、1000回のLambda実行によって対応できる。<br>
これは何万件きても同じことで、スケールの面で大変優れている。<br>
また、1件ごとに処理するため、エラーが発生した場合に原因などとても追いやすい。</p>

<h2>アプリの<a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a>として</h2>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a>でいうと、<a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/Gateway">Gateway</a>と組み合わせて、<a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a>サーバとして利用するケース。<br>
S3などのデータストアに直接アクセスできるように作ることもできるため、ファイルアップロードなどで使われることが多いとか。<br>
個人的には今のところあまり魅力的には感じない使い方。</p>

<h2>事例紹介</h2>

<p>カンファレンスのなかで<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C6%FC%B7%D0%BF%B7%CA%B9">日経新聞</a>社さんののサーバレス<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A1%BC%A5%AD%A5%C6%A5%AF%A5%C1%A5%E3">アーキテクチャ</a>の事例が一番よかったのでぜひ目を通しほしい。</p>

<p><iframe allowfullscreen="true" allowtransparency="true" frameborder="0" height="463" id="talk_frame_361815" mozallowfullscreen="true" src="//speakerdeck.com/player/b4286c46056c404cbd272e253033d0df" style="border:0; padding:0; margin:0; background:transparent;" webkitallowfullscreen="true" width="710"></iframe><cite class="hatena-citation"><a href="https://speakerdeck.com/ikait/serverless-architecture-supports-nikkeis-paper-viewer">speakerdeck.com</a></cite></p>

<p>ポイントとしては下記。見事にLambdaの特徴を活かした利用をしている。</p>

<ul>
<li>新聞は基本的には朝刊と夕刊の２回で限られたときだけ処理する点

<ul>
<li>常時稼働させたくない。EC2立ち上げっぱなしにする必要がない。</li>
</ul>
</li>
<li>しかし、号外や速報など臨時の場合もただあり、それにも備えられる点</li>
<li>日によってニュースの量が異なるため、いつでもスケールできる必要がある点</li>
</ul>

<h1>3. <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%E9%A5%A6%A5%C9">クラウド</a>ベンダーからみたサーバレスの立ち位置</h1>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%E9%A5%A6%A5%C9">クラウド</a>ベンダーにとってサーバレスはどういう立ち位置なのだろうか。<br>
ぼくは<span style="font-size: 150%">「各サービスの横串」</span>と考えています。<br>
EC2、S3、RDSなどなどそれぞれのサービスは単体としてとてもよくできている。<br>
しかし横の連携をしようと思うと別途様々な工夫が必要なのが現状だ。</p>

<p>サーバレスはその横の連携を担うのだ。<br>
各サービス間を紐で固く結びつけてしまう。<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%E9%A5%A6%A5%C9">クラウド</a>ロックインを加速させる役割も持つ。</p>

<p><b>「三葉よ、サーバレス、それもまた結び。」</b></p>

<p>そして、IoTへの布石。<br>
IoTの世界ではリアルタイムなセンサーの情報のやりとりでデ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%A4">バイ</a>スとデータセンタ間の通信遅延が許容できないことがある。<br>
そこでいま研究が進んでいるエッジコンピューティング（フォグコンピューティングとも）などがあるが、<br>
LambdaのようにImmutable, Statelessが前提で作られる、どこの環境でも実行可能な状態はIoTと相性がいいようにみえる。</p>

<p><p>今後どうなっていくかはわからないが、<br>
デ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%A4">バイ</a>スに近いエッジコンピューティング側はLambdaでさばき、そのさばいたデータを中央のデータセンターへ、<br>
なんていうことが主流になってくるかもしれない。と思うとFaaSの存在は見逃せない気がしてくる。</p>
</body></p>

                    </div>
                </section>
                
                
                
                <h1 class="content-subhead">19 Sep 2016, 17:20</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://blog.mosuke.tech/entry/2016/09/19/172009/" class="post-title">ISUCON6予選で惨敗した. 足りなかったのは&#39;Courage&#39;</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">mosuke5</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-ISUCON" href="https://blog.mosuke.tech/categories/isucon">ISUCON</a><a class="post-category post-category-惨敗" href="https://blog.mosuke.tech/categories/%E6%83%A8%E6%95%97">惨敗</a><a class="post-category post-category-ISUCON6" href="https://blog.mosuke.tech/categories/isucon6">ISUCON6</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p><body>
<p><span style="font-size: 80%"><a class="keyword" href="http://d.hatena.ne.jp/keyword/Apple">Apple</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/keynote">keynote</a>で話題の&rsquo;<a class="keyword" href="http://d.hatena.ne.jp/keyword/Courage">Courage</a>&lsquo;使ってみた笑</span></p></p>

<p>ISUCON6予選で惨敗した。(18000点くらい)<br>
端的に言って、とても未熟だった。</p>

<p>とはいえ、とてもいい思い出になったのでまとめる。</p>

<h1>メンバー</h1>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%EA%A1%BC%A5%A8%A5%E0">スリーエム</a>というチーム名で、@mogulla3と@mintsu123と一緒に出場した。<br>
ふたりともぼくよりもアプリの改善などは10倍くらい優秀なエンジニアなので、<br>
ぼくはインフラとか総務的な立ち回りをして、２人がチューニングに集中できるようにすることを心がけていた。</p>

<h1>準備</h1>

<p>準備は３週間の間に土日どちらかに集まってISUCONの過去問を解いたり戦略について事前に打ち合わせしてた。</p>

<ul>
<li>プライベートレポジトリの用意(Gitlab)</li>
<li>チャットルームの用意(Slack)</li>
<li>ISUCON4とISUCON5の予選の過去問解き

<ul>
<li>土日集まったときには戦略や振り返りを重視</li>
<li>実際の過去問ときは平日に各々が空いた時間などにやってた</li>
</ul>
</li>
<li>基本戦略を準備

<ul>
<li>なんの技術を主に使うか</li>
<li>だれが何を担当するか</li>
<li>定形作業の手順化</li>
<li>その他ナレッジなど</li>
</ul>
</li>
</ul>

<h3>採用した技術</h3>

<ul>
<li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a> 7.0</li>
<li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/php">php</a>-fpm</li>
<li>Openresty(nginx) 1.11</li>
<li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a> 5.7</li>
<li>Redis 3.2</li>
</ul>

<h1>当日</h1>

<p>出だしはとても順調だった。<br>
Azure担当だったぼくはすぐにサーバをデプロイし、OSバージョンを確認した。<br>
予想通りの<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a> 16.04であったので、準備したとおり必要な<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DF%A5%C9%A5%EB%A5%A6%A5%A7%A5%A2">ミドルウェア</a>のインストールをすませた。</p>

<p>ほぼ定石と言える下記（定形作業と呼んでいた）もすぐにこなすことができた。</p>

<ul>
<li>調査のための各種ログ出力化</li>
<li>Nginxでの静的ファイルの配信、キャッシュ化</li>
<li>Kataribeインストールと実行</li>
<li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>のインデックスの付与と設定見直し</li>
<li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/php">php</a>-fpmの<a class="keyword" href="http://d.hatena.ne.jp/keyword/Unix">Unix</a><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C9%A5%E1%A5%A4%A5%F3">ドメイン</a>ソケット化</li>
<li>デプロイの仕組みの整理</li>
<li>不要デーモンの停止</li>
</ul>

<p>この状態でもスコアは0のままであり、少し焦りを感じたが、<br>
ここからが本番のチューニング開始である。<br>
Kataribeの結果から、<code>GET /</code>が改善ポイントであることは明らかなのはわかっていた。</p>

<pre><code>Top 20 Sort By Count
Count    Total      Mean    Stddev     Min   P50.0   P90.0   P95.0   P99.0     Max  2xx  3xx  4xx  5xx  Request
  326  366.105  1.123021  2.619395   0.000   0.000   6.188   7.418   9.827  10.207  326    0    0    0  GET / HTTP/1.0
  326  366.154  1.123172  2.618228   0.000   0.001   6.190   7.418   9.778  10.207  326    0    0    0  GET / HTTP/1.1
  240    0.000  0.000000  0.000000   0.000   0.000   0.000   0.000   0.000   0.000  240    0    0    0  GET /css/bootstrap.min.css HTTP/1.0
  240    0.737  0.003071  0.002843   0.000   0.002   0.006   0.010   0.013   0.015  240    0    0    0  GET /css/bootstrap.min.css HTTP/1.1
  120    0.101  0.000842  0.002078   0.000   0.000   0.002   0.003   0.015   0.015  120    0    0    0  GET /img/star.gif HTTP/1.1
  120    0.000  0.000000  0.000000   0.000   0.000   0.000   0.000   0.000   0.000  120    0    0    0  GET /js/jquery.min.js HTTP/1.0
  120    0.000  0.000000  0.000000   0.000   0.000   0.000   0.000   0.000   0.000  120    0    0    0  GET /img/star.gif HTTP/1.0
  120    0.152  0.001267  0.001788   0.000   0.001   0.003   0.004   0.011   0.012  120    0    0    0  GET /css/bootstrap-responsive.min.css HTTP/1.1
  120    0.000  0.000000  0.000000   0.000   0.000   0.000   0.000   0.000   0.000  120    0    0    0  GET /js/bootstrap.min.js HTTP/1.0
  120    0.148  0.001233  0.001843   0.000   0.001   0.003   0.004   0.011   0.012  120    0    0    0  GET /favicon.ico HTTP/1.1
  120    0.157  0.001308  0.001829   0.000   0.001   0.003   0.004   0.011   0.011  120    0    0    0  GET /js/bootstrap.min.js HTTP/1.1
  120    0.379  0.003158  0.002890   0.000   0.002   0.007   0.010   0.013   0.015  120    0    0    0  GET /js/jquery.min.js HTTP/1.1
  120    0.000  0.000000  0.000000   0.000   0.000   0.000   0.000   0.000   0.000  120    0    0    0  GET /favicon.ico HTTP/1.0
  120    0.000  0.000000  0.000000   0.000   0.000   0.000   0.000   0.000   0.000  120    0    0    0  GET /css/bootstrap-responsive.min.css HTTP/1.0
   67  116.697  1.741746  1.159447   0.020   1.760   2.999   3.000   3.001   3.001    0   42   25    0  POST /login HTTP/1.0
   67  116.706  1.741881  1.159099   0.020   1.760   2.999   2.999   3.001   3.001    0   42   25    0  POST /login HTTP/1.1
   35    0.857  0.024486  0.022147   0.000   0.026   0.040   0.085   0.096   0.096   35    0    0    0  GET /stars?keyword=%E5%86%85%E7%94%B0%E4%BF%AE%E5%B9%B3 HTTP/1.1
   35    0.977  0.027914  0.020538   0.000   0.031   0.049   0.062   0.077   0.077   35    0    0    0  GET /stars?keyword=%E3%82%A6%E3%83%BC%E3%82%BA HTTP/1.1
   34    0.867  0.025500  0.018035   0.000   0.028   0.044   0.059   0.071   0.071   34    0    0    0  GET /stars?keyword=%E5%8C%97%E6%B6%88%E9%98%B2%E7%BD%B2 HTTP/1.1
   32    0.731  0.022844  0.015575   0.000   0.025   0.040   0.050   0.052   0.052   32    0    0    0  GET /stars?keyword=%E8%BC%AA%E7%8A%B6%E7%94%B2%E7%8A%B6%E7%AD%8B HTTP/1.1 
</code></pre>

<p>しかし、なかなか突破口が見いだせず、できるところからやっていく方針を取った。<br>
アプリの改善を振り返ってみると、なにもしてねーなって感じがやばい。（何してたんだっけ…(・_・;)）</p>

<ul>
<li>isudaとisutarのfpmプロセスの調整</li>
<li>isudaとisutar間のhttpによる<a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a>呼び出しをなくし、DB接続とした</li>
<li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/SQL">SQL</a>改善

<ul>
<li>htmlifyのkeyword取り出し<a class="keyword" href="http://d.hatena.ne.jp/keyword/SQL">SQL</a>
</li>
<li>load_starの<a class="keyword" href="http://d.hatena.ne.jp/keyword/SQL">SQL</a>
</li>
<li>など</li>
</ul>
</li>
<li>keywordのlengthを予め持つように変更</li>
<li>isudaとisutarの統合

<ul>
<li>効果の検証ができず、結局マージはできなかった</li>
</ul>
</li>
</ul>

<h1>反省</h1>

<p><code>htmlify</code>の改善がなによりも効果がでることはわかっていた。<br>
しかし、その改善についてのいい方法がすぐに思いつかなかったこともあり、<br>
他のやれることを優先しすぎてしまったことが一番の反省点だ。</p>

<p>時間がない、大きな変更したら怖いという思いが強くなり、<br>
どちらかというとやれることをきちんとやればいける、というディフェンシブな思考になってしまっていた気がする。</p>

<p>せっかくRedisやOpenrestyを準備していたが、<br>
そのあたりを発揮せずにおわってしまい残念な感じではあった。<br>
（ここは準備不足ポイントでもあった）</p>

<p>根本の改善に勇気を持って切り込む"<a class="keyword" href="http://d.hatena.ne.jp/keyword/Courage">Courage</a>"を次は発揮したい。</p>

<p>反省会の炙りしめ鯖うまかった。</p>

<p><iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Ftabelog.com%2Ftokyo%2FA1303%2FA130301%2F13003370%2F" title="BISTRO三十五段屋 (渋谷/居酒屋)" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://tabelog.com/tokyo/A1303/A130301/13003370/">tabelog.com</a></cite></p>

<h1>最後に</h1>

<p>反省点は多かったものの、準備期間も含めてこの１ヶ月とても楽しかったし、<br>
また自分の未熟さを実感できてとてもよかった。</p>

<p>今まで、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B6%A5%B5%BB%A5%D7%A5%ED%A5%B0%A5%E9%A5%DF%A5%F3%A5%B0">競技プログラミング</a>などもしたこともなく、<br>
技術面で「競う」ということはほとんどしたことがなかった。</p>

<p><p>この敗北で、技術をきちんと理解し追求していきたいという想いが湧いてきた。<br>
ISUCON主催者ありがとうございました。</p>
</body></p>

                    </div>
                </section>
                
                
            </div>
            
<div class="pagination">
  <nav role="pagination" class="post-list-pagination">
      
      <a href="/page/2/" class="post-list-pagination-item pure-button post-list-pagination-item-prev">
        <i class="fa fa-angle-double-left"></i>&nbsp;Newer
      </a>
      
    <span class="post-list-pagination-item post-list-pagination-item-current">Page 3 of 15</span>
    
      <a href="/page/4/" class="post-list-pagination-item pure-button post-list-pagination-item-next">
        Older&nbsp;<i class="fa fa-angle-double-right"></i>
      </a>
    
  </nav>
</div>


            <hr class="footer-hr" />
<div class="">
    <div class="google-search-engine">
        <script>
          (function() {
            var cx = '012458736543810277235:x4juxtghjhg';
            var gcse = document.createElement('script');
            gcse.type = 'text/javascript';
            gcse.async = true;
            gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(gcse, s);
          })();
        </script>
		    <gcse:search></gcse:search>
    </div>
    <a class="pure-button" href="https://about.mosuke.tech "><i class="fa fa-user"></i> mosuke5</a>
    <a class="pure-button" href="/archive/"><i class="fa fa-archive"></i> Arvhive</a>
    <a class="pure-button" href="https://blog.mosuke.tech/index.xml"><i class="fa fa-rss"></i> rss</a>
</div>
<div class="footer">
    <div class="pure-menu pure-menu-horizontal pure-menu-open">
        <ul>
            <li>&copy; <strong>mosuke5</strong> All rights reserved.<br />Powered by <a class="hugo" href="https://gohugo.io/" target="_blank">hugo</a></li>
        </ul>
    </div>
</div>
<script src="https://blog.mosuke.tech/js/all.min.js"></script>

        </div>
    </div>
</div>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-99596316-1', 'auto');
ga('send', 'pageview');

</script>

</body>
</html>
