<!DOCTYPE html>
<html lang="ja">
    <head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
<link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" href="/css/customization.css">

<title>OpenShiftã€é–‹ç™ºè€…å‘ã‘ã®ç›£è¦–æ©Ÿèƒ½ï¼ˆã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥ï¼‰ãŒé€²åŒ–ã—ã¾ã—ãŸ</title>
<link rel="canonical" href="https://blog.mosuke.tech/entry/2022/12/14/openshift-user-alert-routing/">
<link rel="alternate" hreflang="ja" href="https://blog.mosuke.tech/entry/2022/12/14/openshift-user-alert-routing/" />
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@mosuke5" />
<meta name="twitter:creator" content="@mosuke5" />
<meta name="twitter:title" content="OpenShiftã€é–‹ç™ºè€…å‘ã‘ã®ç›£è¦–æ©Ÿèƒ½ï¼ˆã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥ï¼‰ãŒé€²åŒ–ã—ã¾ã—ãŸ &middot; Goldstineç ”ç©¶æ‰€">
<meta name="twitter:description" content="OpenShiftã®é–‹ç™ºè€…å‘ã‘ã®ç›£è¦–æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã—ãŸã€‚ã—ã‹ã—ã€ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥ã«æ¬ ç‚¹ãŒã‚ã‚Šã€ä½¿ã„ã¥ã‚‰ã„éƒ¨åˆ†ãŒã‚ã‚Šã¾ã—ãŸãŒæ”¹å–„ã•ã‚ŒãŸã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="OpenShiftã€é–‹ç™ºè€…å‘ã‘ã®ç›£è¦–æ©Ÿèƒ½ï¼ˆã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥ï¼‰ãŒé€²åŒ–ã—ã¾ã—ãŸ &middot; Goldstineç ”ç©¶æ‰€">
<meta property="og:description" content="OpenShiftã®é–‹ç™ºè€…å‘ã‘ã®ç›£è¦–æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã—ãŸã€‚ã—ã‹ã—ã€ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥ã«æ¬ ç‚¹ãŒã‚ã‚Šã€ä½¿ã„ã¥ã‚‰ã„éƒ¨åˆ†ãŒã‚ã‚Šã¾ã—ãŸãŒæ”¹å–„ã•ã‚ŒãŸã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚">
<meta property="og:image" content="https://blog.mosuke.tech/image/logo.png" />
<meta property="og:site_name" content="Goldstineç ”ç©¶æ‰€" />
<meta property="og:url" content="https://blog.mosuke.tech/entry/2022/12/14/openshift-user-alert-routing/" />
<link rel="alternate" type="application/rss+xml" title="Goldstineç ”ç©¶æ‰€" href="https://blog.mosuke.tech/index.xml" />
<link rel="icon" href="/image/favicon.ico" />
<meta name="msvalidate.01" content="9220008783970B337CA4AE8362168354" />
<meta name="google-site-verification" content="OcOuGmjhG050c1d16ySxY_FCLT4zhvxFEsGLD9mm6f0" />
</head>
    <body><header>
  <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
    <a class="navbar-brand" href="/">Goldstineç ”ç©¶æ‰€</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <a class="nav-link" href="/">ãƒ›ãƒ¼ãƒ  <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about">ã“ã®ã‚µã‚¤ãƒˆã«ã¤ã„ã¦</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/entry">ãƒ–ãƒ­ã‚°è¨˜äº‹</a>
        </li>
        
        <li class="nav-item">
          <a class="nav-link" href="/kubernetes">Kubernetesã‚’å­¦ã¶</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/work">ãŠå•ã„åˆã‚ã›</a>
        </li>
        
      </ul>
    </div>
  </nav>
</header>
<main id="content" role="main">
            <div class="container">
                <div class="row">
<div class="entry col-md-8 col-xs-12">
    <h1>OpenShiftã€é–‹ç™ºè€…å‘ã‘ã®ç›£è¦–æ©Ÿèƒ½ï¼ˆã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥ï¼‰ãŒé€²åŒ–ã—ã¾ã—ãŸ</h1>
    <div class="entry-sub-title">
        <div class="publish-date">
            <p>åŸ·ç­†æ—¥:<time datetime="2022-12-14T09:16">2022-12-14</time></p>
            
            <p>æ›´æ–°æ—¥:<time datetime="2022-12-14T09:16">2022-12-14</time></p>
            
        </div>
        
            
                <a class="badge badge-inf post-category post-category-OpenShift" href="/categories/openshift">OpenShift</a>
            
        
    </div>
    <div class="entry-content">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#ã“ã‚Œã¾ã§ã®èª²é¡Œ">ã“ã‚Œã¾ã§ã®èª²é¡Œ</a></li>
    <li><a href="#æ©Ÿèƒ½ã®æ¦‚è¦">æ©Ÿèƒ½ã®æ¦‚è¦</a></li>
    <li><a href="#ãµãŸã¤ã®é¸æŠè‚¢">ãµãŸã¤ã®é¸æŠè‚¢</a></li>
    <li><a href="#è¨­å®šã™ã‚‹ã¨ã©ã†ãªã‚‹ã‹">è¨­å®šã™ã‚‹ã¨ã©ã†ãªã‚‹ã‹ï¼Ÿ</a>
      <ul>
        <li><a href="#è¨­å®šã®æœ‰åŠ¹åŒ–ã¨ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹èµ·å‹•">è¨­å®šã®æœ‰åŠ¹åŒ–ã¨ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹èµ·å‹•</a></li>
        <li><a href="#thanos-rulerã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«">thanos rulerã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«</a></li>
        <li><a href="#alertmanagerconfigã®ä½œæˆ">AlertmanagerConfigã®ä½œæˆ</a></li>
        <li><a href="#ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥">ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥</a></li>
      </ul>
    </li>
    <li><a href="#ã¾ã¨ã‚">ã¾ã¨ã‚</a></li>
  </ul>
</nav>
        <p>ã“ã‚“ã«ã¡ã¯ã€ã‚‚ãƒ¼ã™ã‘ã§ã™ã€‚<br>
<a href="https://qiita.com/advent-calendar/2022/openshift">OpenShiftã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</a>14æ—¥ç›®ã®ã‚†ã‚‹ãƒã‚¿æŠ•ç¨¿ã§ã™ã€‚<br>
2022å¹´ã€OpenShiftãƒã‚¿ã§ä¸€ç•ªPVã‚’ç¨¼ã„ã è¨˜äº‹ãŒã€Œ<a href="https://blog.mosuke.tech/entry/2021/04/24/openshift-monitoring-your-own-service/">OpenShiftã®æ–°æ©Ÿèƒ½ã€ãƒ¦ãƒ¼ã‚¶å®šç¾©ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç›£è¦–ã£ã¦ã©ã“ã¾ã§ã§ãã‚‹ï¼Ÿ</a>ã€ã§ã—ãŸã€‚
OpenShiftã‚’ãŠä½¿ã„ã®ã¿ãªã•ã‚“ã¯ã ã„ã¶ç›£è¦–è¨­å®šå‘¨ã‚Šã§å›°ã£ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã­ç¬‘
ã¡ãªã¿ã«ä½™è«‡ã§ã™ãŒã€ã“ã®è¨˜äº‹ã ã‘ã§2500PVãã‚‰ã„ã‚ã£ãŸã‚‰ã—ã„ã§ã™ã€‚</p>
<p>ãã“ã§ä»Šå›ã¯ã€ãã‚“ãªOpenShiftã®ç›£è¦–æ©Ÿèƒ½ã®ä¸è¶³ç‚¹ã§ã‚ã£ãŸã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥ãŒé€²åŒ–ã—ãŸã‚ˆã£ã¦ã“ã¨ã‚’æ›¸ã„ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚</p>
<div class="belg-link row">
  <div class="belg-left col-md-2 d-none d-md-block">
    <a href="https://blog.mosuke.tech/entry/2021/04/24/openshift-monitoring-your-own-service/" target="_blank">
      <img class="belg-site-image" src="https://blog.mosuke.tech/image/logo.png" />
    </a>
  </div>
  <div class="belg-right col-md-10">
  <div class="belg-title">
      <a href="https://blog.mosuke.tech/entry/2021/04/24/openshift-monitoring-your-own-service/" target="_blank">OpenShiftã®æ–°æ©Ÿèƒ½ã€ãƒ¦ãƒ¼ã‚¶å®šç¾©ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç›£è¦–ã£ã¦ã©ã“ã¾ã§ã§ãã‚‹ï¼Ÿ Â· Goldstineç ”ç©¶æ‰€</a>
    </div>
    <div class="belg-description">OpenShift 4.6ã‹ã‚‰æ­£å¼ã«è¿½åŠ ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶å®šç¾©ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç›£è¦–æ©Ÿèƒ½ã«ã¤ã„ã¦ã€ã©ã“ã¾ã§ä½¿ãˆã‚‹ã®ã‹ï¼Ÿå®Ÿæˆ¦æŠ•å…¥ã§ããã†ã‹ãªã©ã®è¦³ç‚¹ã§æ¤œè¨¼ã—ã¦ã„ãã¾ã™ã€‚Prometheusã‚’ç‹¬è‡ªã§æ§‹ç¯‰ã™ã‚‹ã“ã¨ãªãç›£è¦–ã§ãã‚‹æ–°æ©Ÿèƒ½ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</div>
    <div class="belg-site">
      <img src="https://blog.mosuke.tech/image/favicon.ico" class="belg-site-icon">
      <span class="belg-site-name">Goldstineç ”ç©¶æ‰€</span>
    </div>
  </div>
</div>
<h2 id="ã“ã‚Œã¾ã§ã®èª²é¡Œ">ã“ã‚Œã¾ã§ã®èª²é¡Œ</h2>
<p>ãƒ¦ãƒ¼ã‚¶å®šç¾©ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç›£è¦–ã§ã¯ã€é–‹ç™ºè€…ã«Prometheusç­‰ã‚’ç”¨æ„ã•ã›ãšã«OpenShiftä¸Šã§ç›£è¦–ãŒã§ãã‚‹ã¨ã„ã†ã“ã¨ã§ãƒ‹ãƒ¼ã‚ºã®ã‚ã‚‹æ©Ÿèƒ½ã§ã—ãŸã€‚<br>
ä¸€æ–¹ã§ã€<u>ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥å…ˆã®è¨­å®šãŒã‚¯ãƒ©ã‚¹ã‚¿ç®¡ç†è€…ã®ã¿ã—ã‹ã§ããšã€ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆçš„ã«OpenShiftã‚’åˆ©ç”¨ã™ã‚‹çµ„ç¹”ã§ã¯ä½¿ã„ã¥ã‚‰ã„</u>å´é¢ãŒã‚ã‚Šã¾ã—ãŸã€‚</p>
<p>OpenShift 4.11ã§ã¤ã„ã«ã“ã®ç‚¹ãŒè§£æ¶ˆã•ã‚Œã€ã‚ˆã‚Šé–‹ç™ºè€…ã«ã¨ã£ã¦ä½¿ã„ã‚„ã™ã„ç›£è¦–æ©Ÿèƒ½ã‚’æä¾›ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸğŸ‘ğŸ‘<br>
å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€Œ<a href="https://access.redhat.com/documentation/ja-jp/openshift_container_platform/4.11/html/monitoring/enabling-alert-routing-for-user-defined-projects" target="_blank">ç¬¬6ç«  ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¢ãƒ©ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®æœ‰åŠ¹åŒ–</a>ã€ã§ã™ã€‚</p>
<p><img src="/image/openshift-monitoring-alert-before.png" alt=""></p>
<h2 id="æ©Ÿèƒ½ã®æ¦‚è¦">æ©Ÿèƒ½ã®æ¦‚è¦</h2>
<p>ã¾ãšã€ã–ã£ãã‚Šã¨ã—ãŸæ©Ÿèƒ½ã®æ¦‚è¦ã‚’èª¬æ˜ã—ã¾ã™ã€‚<br>
ãƒ¦ãƒ¼ã‚¶å®šç¾©ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç›£è¦–ã§ã¯ã€é–‹ç™ºè€…ãŒ <code>ServiceMonitor</code>ã‚„<code>PrometheusRule</code>ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã€é–‹ç™ºè€…è‡ªèº«ã§ç›£è¦–è¨­å®šãŠã‚ˆã³ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®šãŒå¯èƒ½ã§ã—ãŸã€‚è©³ã—ãã¯ã€ä»¥å‰ã®ãƒ–ãƒ­ã‚°ï¼ˆ<a href="https://blog.mosuke.tech/entry/2021/04/24/openshift-monitoring-your-own-service/">OpenShiftã®æ–°æ©Ÿèƒ½ã€ãƒ¦ãƒ¼ã‚¶å®šç¾©ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç›£è¦–ã£ã¦ã©ã“ã¾ã§ã§ãã‚‹ï¼Ÿ</a>ï¼‰ã‚’è¦‹ã¦ãã ã•ã„ã€‚</p>
<p>ã•ã‚‰ã«ã€<code>AlermanageConfig</code>ãƒªã‚½ãƒ¼ã‚¹ã‚’é–‹ç™ºè€…ãŒä½œæˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã€Namespaceå˜ä½ã«ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥å…ˆã®ç®¡ç†ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
ãƒ¦ãƒ¼ã‚¶å´ï¼ˆé–‹ç™ºè€…å´ï¼‰ã§ <code>AlertmanagerConfig</code> ã‚’ä½œæˆã™ã‚‹ã¨Prometheus OperatorãŒAlertmanagerã«ã‚¢ãƒ©ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®è¨­å®šã‚’è¿½åŠ ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p>
<p><img src="/image/openshift-monitoring-alert-after.png" alt=""></p>
<h2 id="ãµãŸã¤ã®é¸æŠè‚¢">ãµãŸã¤ã®é¸æŠè‚¢</h2>
<p>ãŠãŠã‚ˆãã®æ¦‚è¦ã¯ã¤ã‹ã‚ã¾ã—ãŸã§ã—ã‚‡ã†ã‹ï¼Ÿ
ã¨ã‚Šã‚ãˆãšã€é–‹ç™ºè€…ã«ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥å…ˆç®¡ç†ã®æ¨©é™ç§»è­²ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ä¾¿åˆ©ã«ãªã‚‹ã“ã¨ã¯é–“é•ã„ãªã—ã§ã™ã­ã€‚</p>
<p>ã“ã®æ©Ÿèƒ½ã‚’ä½¿ã†ã«ã‚ãŸã£ã¦ã€ãµãŸã¤ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’é¸æŠã§ãã¾ã™ã€‚
ä»¥ä¸‹ã®ãµãŸã¤ã«ãªã‚Šã¾ã™ãŒã€ãªãœã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒå¿…è¦ã‹ã¨ã„ã†ã¨ã€Alertmanagerã®å‡¦ç†ã®ã‚ªãƒ•ãƒ­ãƒ¼ãƒ‰ã«ãªã‚Šã¾ã™ã€‚<br>
ã¾ãŸã€ãã‚‚ãã‚‚ã®è©±ã§ã™ãŒã€OpenShiftã«ã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚¯ãƒ©ã‚¹ã‚¿ç›£è¦–ã®ãŸã‚ã®AlertmanagerãŒèµ·å‹•ã—ã¦ã„ã¾ã™ã€‚</p>
<ol>
<li>æ—¢å­˜ã®Cluster Monitoringã®Alertmanagerã‚’å…±æœ‰ã™ã‚‹æ–¹æ³•</li>
<li>ãƒ¦ãƒ¼ã‚¶å®šç¾©ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç›£è¦–å‘ã‘ã«å€‹åˆ¥ã®Alertmanagerã‚’ä½œæˆã—ã¦ä½¿ç”¨ã™ã‚‹æ–¹æ³•</li>
</ol>
<p><img src="/image/openshift-user-workload-alertmanager.png" alt=""></p>
<h2 id="è¨­å®šã™ã‚‹ã¨ã©ã†ãªã‚‹ã‹">è¨­å®šã™ã‚‹ã¨ã©ã†ãªã‚‹ã‹ï¼Ÿ</h2>
<h3 id="è¨­å®šã®æœ‰åŠ¹åŒ–ã¨ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹èµ·å‹•">è¨­å®šã®æœ‰åŠ¹åŒ–ã¨ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹èµ·å‹•</h3>
<p>ã¾ãšã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆé€šã‚Šã€ãƒ¦ãƒ¼ã‚¶å®šç¾©ã‚¢ãƒ©ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’æœ‰åŠ¹ã«ã—ã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ConfigMap</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">user-workload-monitoring-config</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">openshift-user-workload-monitoring</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">data</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">config.yaml</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    alertmanager:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      enabled: true
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      enableAlertmanagerConfig: true</span>    
</span></span></code></pre></div><p>è¨­å®šã™ã‚‹ã¨ãªã«ãŒèµ·ã“ã‚‹ã‹ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚<br>
ã¾ãšã€<code>openshift-user-workload-monitoring</code> ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã«æ–°ã—ãAlertmanagerã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒèµ·å‹•ã—ã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>% oc get pod -n openshift-user-workload-monitoring | grep alert
</span></span><span style="display:flex;"><span>alertmanager-user-workload-0           6/6     Running   0          8d
</span></span><span style="display:flex;"><span>alertmanager-user-workload-1           6/6     Running   0          8d
</span></span></code></pre></div><h3 id="thanos-rulerã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«">thanos rulerã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«</h3>
<p>ã•ã‚‰ã«ã€thanos rulerã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚<br>
thanos rulerã¯ã€<code>PrometheusRule</code>ã®è¨­å®šå†…å®¹ã‚’ã¿ã¦ã€ã‚¢ãƒ©ãƒ¼ãƒˆç™ºå ±ã‚’æ‹…å½“ã—ã¦ã„ã¾ã™ã€‚
ãã®é€šçŸ¥å…ˆã®Alertmanagerã®å‘ãå…ˆãŒ <code>dnssrv+_web._tcp.alertmanager-operated.openshift-user-workload-monitoring.svc</code> ã¨ãªã£ã¦ã„ã¦ã€<code>openshift-user-workload-monitoring</code>å†…ã«æ–°ã—ãèµ·å‹•ã—ãŸAlertmanagerã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>% oc get -n openshift-user-workload-monitoring secret thanos-ruler-alertmanagers-config -o jsonpath=&#34;{.data.alertmanagers\.yaml}&#34; | base64 -d
</span></span><span style="display:flex;"><span>alertmanagers:
</span></span><span style="display:flex;"><span>- scheme: https
</span></span><span style="display:flex;"><span>  api_version: v2
</span></span><span style="display:flex;"><span>  http_config:
</span></span><span style="display:flex;"><span>    bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token
</span></span><span style="display:flex;"><span>    tls_config:
</span></span><span style="display:flex;"><span>      ca_file: /etc/prometheus/configmaps/serving-certs-ca-bundle/service-ca.crt
</span></span><span style="display:flex;"><span>      server_name: alertmanager-user-workload.openshift-user-workload-monitoring.svc
</span></span><span style="display:flex;"><span>  static_configs:
</span></span><span style="display:flex;"><span>  - dnssrv+_web._tcp.alertmanager-operated.openshift-user-workload-monitoring.svc
</span></span></code></pre></div><p>ã¡ãªã¿ã«ã€æ—¢å­˜ã®Cluster Monitoringã®Alertmanagerã‚’å…±æœ‰ã™ã‚‹æ–¹æ³•ã‚’æ¡ç”¨ã—ãŸå ´åˆã€å‘ãå…ˆã¯å¤‰ã‚ã‚Š <code>dnssrv+_web._tcp.alertmanager-operated.openshift-monitoring.svc</code> ã¨ãªã£ã¦ã„ã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>% oc get -n openshift-user-workload-monitoring secret thanos-ruler-alertmanagers-config -o jsonpath=&#34;{.data.alertmanagers\.yaml}&#34; | base64 -d
</span></span><span style="display:flex;"><span>alertmanagers:
</span></span><span style="display:flex;"><span>- scheme: https
</span></span><span style="display:flex;"><span>  api_version: v2
</span></span><span style="display:flex;"><span>  http_config:
</span></span><span style="display:flex;"><span>    bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token
</span></span><span style="display:flex;"><span>    tls_config:
</span></span><span style="display:flex;"><span>      ca_file: /etc/prometheus/configmaps/serving-certs-ca-bundle/service-ca.crt
</span></span><span style="display:flex;"><span>      server_name: alertmanager-main.openshift-monitoring.svc
</span></span><span style="display:flex;"><span>  static_configs:
</span></span><span style="display:flex;"><span>  - dnssrv+_web._tcp.alertmanager-operated.openshift-monitoring.svc
</span></span></code></pre></div><h3 id="alertmanagerconfigã®ä½œæˆ">AlertmanagerConfigã®ä½œæˆ</h3>
<p>Alertmanagerã®èµ·å‹•ãŒã§ããŸã®ã§ã€AlertmanagerConfigã‚’ä½œæˆã—ã¦ã€ã‚¢ãƒ©ãƒ¼ãƒˆã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«ã‚’è¨­å®šã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
ä»Šå›ã¯ã€Slackã«å¯¾ã—ã¦ã‚¢ãƒ©ãƒ¼ãƒˆã‚’é€šçŸ¥ã—ã¦ã¿ã¾ã™ã€‚</p>
<p>AlertmanagerConfigã®è¨­å®šã§ãã‚‹é …ç›®ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã¿ã‚‹ã¨ã„ã„ã§ã™ã€‚ã‚µãƒ³ãƒ—ãƒ«ãŒå°‘ãªã„ã®ã§å®Ÿç¾ã§ãã‚‹é …ç›®ã¯Operatorã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå‚è€ƒã«ãªã‚Šã¾ã™ã€‚</p>
<div class="belg-link row">
  <div class="belg-left col-md-2 d-none d-md-block">
    <a href="https://github.com/prometheus-operator/prometheus-operator" target="_blank">
      <img class="belg-site-image" src="https://opengraph.githubassets.com/14c402a3e23e028ecb39bd809d50323f3a04483ff729c7a2f3790951e0be8a8a/prometheus-operator/prometheus-operator" />
    </a>
  </div>
  <div class="belg-right col-md-10">
  <div class="belg-title">
      <a href="https://github.com/prometheus-operator/prometheus-operator" target="_blank">prometheus-operator/api.md at main Â· prometheus-operator/prometheus-operator</a>
    </div>
    <div class="belg-description">Prometheus Operator creates/configures/manages Prometheus clusters atop Kubernetes - prometheus-operator/api.md at main Â· prometheus-operator/prometheus-operator</div>
    <div class="belg-site">
      <img src="https://github.githubassets.com/favicons/favicon.svg" class="belg-site-icon">
      <span class="belg-site-name">GitHub</span>
    </div>
  </div>
</div>
<p>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç¢ºèªã™ã‚‹ã¨ã€<code>SlackConfig</code>ã®<code>apiURL</code>ã¯ <code>Kubernetes core/v1.SecretKeySelector</code> ã§æŒ‡å®šã§ãã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚
Slackã¸ã®Webhook URLã«ã¯ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæƒ…å ±ãŒå«ã¾ã‚Œã‚‹ã®ã§ã€ç›´æ¥æ›¸ã‹ãšã«Secretã‹ã‚‰èª­ã¿å‡ºã›ã¾ã™ã€‚</p>
<p>ã¨ã„ã†ã‚ã‘ã§ã€Slack URLã‚’æ ¼ç´ã—ãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>% oc create secret generic my-slack-secret --from-literal=url=https://hooks.slack.com/services/xxxxxxxxx
</span></span></code></pre></div><p><code>AlertmanagerConfig</code>ã®è¨­å®šã¯ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">monitoring.coreos.com/v1beta1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">AlertmanagerConfig</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">example-routing</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">mosuke5-monitoring</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">route</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">receiver</span>: <span style="color:#ae81ff">default</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">groupBy</span>: [<span style="color:#ae81ff">job]</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">receivers</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">default</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">slackConfigs</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">apiURL</span>:  <span style="color:#75715e">## Kubernetesã®Secretã‚’æŒ‡å®š</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">name</span>: <span style="color:#ae81ff">my-slack-secret</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">key</span>: <span style="color:#ae81ff">url</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">channel</span>: <span style="color:#ae81ff">mosuke5-alert</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">sendResolved</span>: <span style="color:#66d9ef">true</span>
</span></span></code></pre></div><p>ä¸Šã®è¨­å®šã‚’åæ˜ å¾Œã€å®Ÿéš›ã«Alertmanagerã«ã©ã®ã‚ˆã†ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
ã‚‚ã¡ã‚ã‚“ã€åˆ©ç”¨è€…ã‚µã‚¤ãƒ‰ã§ã¯æ°—ã«ã™ã‚‹å¿…è¦ã¯ãªã„ã§ã™ãŒã€ç®¡ç†è€…ç›®ç·šã§ã¯çŸ¥ã£ã¦ãŠãã¨ã„ã„ã§ã™ã€‚
<code>namespace=&quot;mosuke5-monitoring&quot;</code> ã«ãƒãƒƒãƒã™ã‚‹ãƒ©ãƒ™ãƒ«ã®ã‚¢ãƒ©ãƒ¼ãƒˆã‚’<code>mosuke5-monitoring/example-routing/default</code>ã«é£›ã°ã™è¨­å®šãŒå…¥ã£ã¦ã¾ã™ã­ã€‚
<code>mosuke5-monitoring/example-routing/default</code>ã®è©³ç´°è¨­å®šã«ã¯ã€Slackã®URLç­‰ãŒæ›¸ã‹ã‚Œã¦ã„ã¾ã—ãŸã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>% oc get secret -n openshift-user-workload-monitoring alertmanager-user-workload-generated -o jsonpath=&#34;{.data.alertmanager\.yaml}&#34; | base64 -d
</span></span><span style="display:flex;"><span>route:
</span></span><span style="display:flex;"><span>  receiver: Default
</span></span><span style="display:flex;"><span>  group_by:
</span></span><span style="display:flex;"><span>  - namespace
</span></span><span style="display:flex;"><span>  routes:
</span></span><span style="display:flex;"><span>  - receiver: mosuke5-monitoring/example-routing/default
</span></span><span style="display:flex;"><span>    group_by:
</span></span><span style="display:flex;"><span>    - job
</span></span><span style="display:flex;"><span>    matchers:
</span></span><span style="display:flex;"><span>    - namespace=&#34;mosuke5-monitoring&#34;
</span></span><span style="display:flex;"><span>    continue: true
</span></span><span style="display:flex;"><span>receivers:
</span></span><span style="display:flex;"><span>- name: Default
</span></span><span style="display:flex;"><span>- name: mosuke5-monitoring/example-routing/default
</span></span><span style="display:flex;"><span>  slack_configs:
</span></span><span style="display:flex;"><span>  - send_resolved: true
</span></span><span style="display:flex;"><span>    api_url: https://hooks.slack.com/services/xxxxxxxxxxxxxxxx
</span></span><span style="display:flex;"><span>    channel: mosuke5-alert
</span></span><span style="display:flex;"><span>templates: []
</span></span></code></pre></div><h3 id="ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥">ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥</h3>
<p>ã‚ã¨ã¯ã€<code>ServiceMonitor</code>ã¨<code>PrometheusRule</code>ã‚’è¨­å®šã—ã¦ã€ã‚¢ãƒ©ãƒ¼ãƒˆç™ºå ±ã•ã›ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
è©³ã—ãã¯ã€å‰å›ãƒ–ãƒ­ã‚°ã§ç¢ºèªã—ã¦ãã ã•ã„ã€‚
æ‰‹å…ƒã®ç’°å¢ƒã§ã¯ã€ã—ã£ã‹ã‚ŠSlackã«é€šçŸ¥ã•ã‚Œã‚‹ã“ã¨ç¢ºèªã§ãã¾ã—ãŸã€‚</p>
<p><img src="/image/openshift-user-alert-routing-slack-notification.png" alt=""></p>
<h2 id="ã¾ã¨ã‚">ã¾ã¨ã‚</h2>
<p>2022å¹´ã‚‚ã£ã¨ã‚‚PVã‚’ç¨¼ã„ã ï¼ˆè£ã‚’è¿”ã›ã°ãƒ‹ãƒ¼ã‚ºã®ã‚ã£ãŸï¼‰è¨˜äº‹ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ç›£è¦–æ©Ÿèƒ½ã§ã—ãŸã€‚
ãã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ç›£è¦–æ©Ÿèƒ½ã®ä¸è¶³ç‚¹ã§ã‚ã‚‹ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥ãŒæ”¹å–„ã•ã‚ŒãŸãŸã‚ã€ãã®å†…å®¹ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚</p>
<p>å€‹äººçš„ãªæ‰€æ„Ÿã¨ã—ã¦ã¯ã€ã“ã®æ”¹å–„ã§é‹ç”¨ç’°å¢ƒã¸ã®æŠ•å…¥ã‚‚ååˆ†è¦–é‡ã«å…¥ã‚Œã‚‰ã‚Œã‚‹ç¨‹åº¦ã€è‰¯ããªã£ã¦ããŸã¨æ€ã£ã¦ã„ã¾ã™ã€‚
é‹ç”¨ã¾ã‚ã‚Šã®æ©Ÿèƒ½ã¯ã€ã»ã‹ã«ã‚‚ã©ã‚“ã©ã‚“æ”¹å–„ã—ã¦ã„ã£ã¦ã„ã‚‹ã®ã§ã€ç›®ç‰æ©Ÿèƒ½ãŒã¾ãŸã§ãŸã‚‰ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p>
    </div>
<div class="entry-sub-content bd-callout bd-callout-info request-for-entry">
    <h5>è¨˜äº‹ã®å†…å®¹ã«é–¢é€£ã—ãŸç›¸è«‡ã€ä»•äº‹ä¾é ¼ã—ãŸã„ <span class="badge badge-info">New</span></h5>
    <p>è¨˜äº‹ã®å†…å®¹ã‚„ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–æŠ€è¡“ã«é–¢ã™ã‚‹ç›¸è«‡ã€ä»•äº‹ä¾é ¼ã‚’é–‹å§‹ã—ã¾ã—ãŸã€‚<br/><a href="/work">ä»•äº‹ä¾é ¼ã€ç›¸è«‡ã‚’ã—ã¦ã¿ã‚‹</a></p>
</div>

<div class="entry-sub-content bd-callout bd-callout-info request-for-entry">
    <h5>ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯</h5>
    <p>æœ¬è¨˜äº‹ã«å¯¾ã—ã¦ã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚ã‚Œã°ã“ã¡ã‚‰ã®ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰ã”è¨˜å…¥ãã ã•ã„ã€‚<br/><a href="https://docs.google.com/forms/d/e/1FAIpQLSfvDsTxSsz2xRodgkYSXP8l-bpS39LIOoKrZwja8W_YWJRA7A/viewform?entry.853982869=OpenShift%e3%80%81%e9%96%8b%e7%99%ba%e8%80%85%e5%90%91%e3%81%91%e3%81%ae%e7%9b%a3%e8%a6%96%e6%a9%9f%e8%83%bd%ef%bc%88%e3%82%a2%e3%83%a9%e3%83%bc%e3%83%88%e9%80%9a%e7%9f%a5%ef%bc%89%e3%81%8c%e9%80%b2%e5%8c%96%e3%81%97%e3%81%be%e3%81%97%e3%81%9f" target="_blank" onClick="gtag('event', 'link', {'event_category': 'contact-to-entry','event_label': 'OpenShiftã€é–‹ç™ºè€…å‘ã‘ã®ç›£è¦–æ©Ÿèƒ½ï¼ˆã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥ï¼‰ãŒé€²åŒ–ã—ã¾ã—ãŸ'});">è¨˜äº‹ã®å†…å®¹ã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã—ã¦ã¿ã‚‹</a></p>
</div><div class="entry-sub-content post-share">
        <div class="post-share-links">
            <a href="https://b.hatena.ne.jp/entry/" class="hatena-bookmark-button" data-hatena-bookmark-layout="basic-label-counter" data-hatena-bookmark-lang="ja" title="ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ "><img src="https://b.st-hatena.com/images/v4/public/entry-button/button-only@2x.png" alt="ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ " width="20" height="20" style="border: none;" /></a><script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
            <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
            <iframe src="https://www.facebook.com/plugins/share_button.php?href=https%3a%2f%2fblog.mosuke.tech%2fentry%2f2020%2f07%2f09%2fcontainer-image-size%2f&layout=button_count&size=small&mobile_iframe=true&appId=1383467145023614&width=90&height=20" width="90" height="20" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowTransparency="true"></iframe>
        </div>
    </div>
</div><div class="col-md-4 col-xs-12">
  <div class="sidebar-content related-post">
    <h3>æœ€æ–°ã®è¨˜äº‹</h3>
    <ul class="list-group">
      <li class="list-group-item"><a href="https://blog.mosuke.tech/entry/2022/12/14/openshift-user-alert-routing/" onClick="gtag('event', 'link', {'event_category': 'recent-posts','event_label': 'OpenShiftã€é–‹ç™ºè€…å‘ã‘ã®ç›£è¦–æ©Ÿèƒ½ï¼ˆã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥ï¼‰ãŒé€²åŒ–ã—ã¾ã—ãŸ'});">OpenShiftã€é–‹ç™ºè€…å‘ã‘ã®ç›£è¦–æ©Ÿèƒ½ï¼ˆã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥ï¼‰ãŒé€²åŒ–ã—ã¾ã—ãŸ</a></li>
      <li class="list-group-item"><a href="https://blog.mosuke.tech/entry/2022/10/28/ikukyu/" onClick="gtag('event', 'link', {'event_category': 'recent-posts','event_label': '3ãƒ¶æœˆã®è‚²ä¼‘ã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦æ„Ÿã˜ãŸã¼ãã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚­ãƒ£ãƒªã‚¢'});">3ãƒ¶æœˆã®è‚²ä¼‘ã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦æ„Ÿã˜ãŸã¼ãã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚­ãƒ£ãƒªã‚¢</a></li>
      <li class="list-group-item"><a href="https://blog.mosuke.tech/entry/2022/06/24/k8s-finalizer/" onClick="gtag('event', 'link', {'event_category': 'recent-posts','event_label': 'Kubernetesã§ã€NamespaceãŒTerminatingã®ã¾ã¾æ¶ˆã›ãªã„ç†ç”±ã«ã¤ã„ã¦ã®å®Ÿé¨“(finalizer)'});">Kubernetesã§ã€NamespaceãŒTerminatingã®ã¾ã¾æ¶ˆã›ãªã„ç†ç”±ã«ã¤ã„ã¦ã®å®Ÿé¨“(finalizer)</a></li>
      <li class="list-group-item"><a href="https://blog.mosuke.tech/entry/2022/06/19/cks/" onClick="gtag('event', 'link', {'event_category': 'recent-posts','event_label': 'CKSåˆæ ¼ã—ã¾ã—ãŸã€‚å­¦ç¿’æ–¹æ³•ã‚„æ°—ã«ãªã‚‹ç–‘å•ãªã©ã¾ã¨ã‚'});">CKSåˆæ ¼ã—ã¾ã—ãŸã€‚å­¦ç¿’æ–¹æ³•ã‚„æ°—ã«ãªã‚‹ç–‘å•ãªã©ã¾ã¨ã‚</a></li>
      <li class="list-group-item"><a href="https://blog.mosuke.tech/entry/2022/06/07/admission-webhook-opa/" onClick="gtag('event', 'link', {'event_category': 'recent-posts','event_label': 'Admission Webhookã‚’ä½œã£ã¦éŠã‚“ã§ã€ãã®ä»•çµ„ã¿ã‚’ç†è§£ã—ã‚ˆã†ï¼ˆGatekeeperç·¨ï¼‰'});">Admission Webhookã‚’ä½œã£ã¦éŠã‚“ã§ã€ãã®ä»•çµ„ã¿ã‚’ç†è§£ã—ã‚ˆã†ï¼ˆGatekeeperç·¨ï¼‰</a></li>
      </ul>
  </div>
  <div class="sidebar-content campaign-ad">
    
    <ins class="adsbygoogle"
    style="display:block"
    data-ad-client="ca-pub-2753210161325997"
    data-ad-slot="4759840302"
    data-ad-format="auto"
    data-full-width-responsive="true"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    
  </div>
  <div class="sidebar-content openshift-ad">
    
    <div class="openshift-tettei-nyumon">
      <p>ã€ŒOpenShiftå¾¹åº•å…¥é–€ã€åŸ·ç­†ã—ã¾ã—ãŸï¼</p>
      <a href="https://amzn.to/325lCFr" target="_blank" onclick="gtag('event', 'link', {'event_category': 'sidebar_ad','event_label': 'OpenShiftå¾¹åº•å…¥é–€'});"><img src="/image/openshift-tettei-nyumon.jpg" class="img-fluid" alt="Responsive image" style="max-width: 200px;"></a>
    </div>
    
  </div>
  <div class="sidebar-content related-post">
    <h3>ã‚«ãƒ†ã‚´ãƒªãƒ¼</h3>
    <ul class="list-group">
      <li class="list-group-item">
        <a href="/categories/alibaba-cloud" onClick="gtag('event', 'link', {'event_category': 'categories','event_label': 'alibaba-cloud'});">alibaba-cloud (16)</a>
      </li>
      <li class="list-group-item">
        <a href="/categories/aws" onClick="gtag('event', 'link', {'event_category': 'categories','event_label': 'aws'});">aws (14)</a>
      </li>
      <li class="list-group-item">
        <a href="/categories/devops" onClick="gtag('event', 'link', {'event_category': 'categories','event_label': 'devops'});">devops (33)</a>
      </li>
      <li class="list-group-item">
        <a href="/categories/kubernetes" onClick="gtag('event', 'link', {'event_category': 'categories','event_label': 'kubernetes'});">kubernetes (65)</a>
      </li>
      <li class="list-group-item">
        <a href="/categories/openshift" onClick="gtag('event', 'link', {'event_category': 'categories','event_label': 'openshift'});">openshift (16)</a>
      </li>
      <li class="list-group-item">
        <a href="/categories/%e3%82%a2%e3%83%97%e3%83%aa%e3%82%b1%e3%83%bc%e3%82%b7%e3%83%a7%e3%83%b3%e9%96%8b%e7%99%ba" onClick="gtag('event', 'link', {'event_category': 'categories','event_label': 'ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™º'});">ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™º (22)</a>
      </li>
      <li class="list-group-item">
        <a href="/categories/%e3%82%a4%e3%83%99%e3%83%b3%e3%83%88" onClick="gtag('event', 'link', {'event_category': 'categories','event_label': 'ã‚¤ãƒ™ãƒ³ãƒˆ'});">ã‚¤ãƒ™ãƒ³ãƒˆ (8)</a>
      </li>
      <li class="list-group-item">
        <a href="/categories/%e3%82%a4%e3%83%b3%e3%83%95%e3%83%a9%e6%a7%8b%e7%af%89" onClick="gtag('event', 'link', {'event_category': 'categories','event_label': 'ã‚¤ãƒ³ãƒ•ãƒ©æ§‹ç¯‰'});">ã‚¤ãƒ³ãƒ•ãƒ©æ§‹ç¯‰ (26)</a>
      </li>
      <li class="list-group-item">
        <a href="/categories/%e3%82%ad%e3%83%a3%e3%83%aa%e3%82%a2" onClick="gtag('event', 'link', {'event_category': 'categories','event_label': 'ã‚­ãƒ£ãƒªã‚¢'});">ã‚­ãƒ£ãƒªã‚¢ (16)</a>
      </li>
      <li class="list-group-item">
        <a href="/categories/%e3%82%af%e3%83%a9%e3%82%a6%e3%83%89%e6%8a%80%e8%a1%93" onClick="gtag('event', 'link', {'event_category': 'categories','event_label': 'ã‚¯ãƒ©ã‚¦ãƒ‰æŠ€è¡“'});">ã‚¯ãƒ©ã‚¦ãƒ‰æŠ€è¡“ (20)</a>
      </li>
      <li class="list-group-item">
        <a href="/categories/%e3%82%b3%e3%83%b3%e3%83%86%e3%83%8a" onClick="gtag('event', 'link', {'event_category': 'categories','event_label': 'ã‚³ãƒ³ãƒ†ãƒŠ'});">ã‚³ãƒ³ãƒ†ãƒŠ (8)</a>
      </li>
      <li class="list-group-item">
        <a href="/categories/%e3%82%b5%e3%83%bc%e3%83%90%e6%8a%80%e8%a1%93" onClick="gtag('event', 'link', {'event_category': 'categories','event_label': 'ã‚µãƒ¼ãƒæŠ€è¡“'});">ã‚µãƒ¼ãƒæŠ€è¡“ (5)</a>
      </li>
      <li class="list-group-item">
        <a href="/categories/%e3%83%96%e3%83%ad%e3%82%b0%e9%81%8b%e7%94%a8" onClick="gtag('event', 'link', {'event_category': 'categories','event_label': 'ãƒ–ãƒ­ã‚°é‹ç”¨'});">ãƒ–ãƒ­ã‚°é‹ç”¨ (11)</a>
      </li>
      <li class="list-group-item">
        <a href="/categories/%e8%b3%87%e6%a0%bc%e8%a9%a6%e9%a8%93" onClick="gtag('event', 'link', {'event_category': 'categories','event_label': 'è³‡æ ¼è©¦é¨“'});">è³‡æ ¼è©¦é¨“ (9)</a>
      </li>
      </ul>
  </div>
  <div class="sidebar-content related-post">
    <h3>ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–</h3>
    <ul class="list-group">
      <li class="list-group-item">
        <a href="/archive/2014" onClick="gtag('event', 'link', {'event_category': 'archives','event_label': '2014'});">2014 Archive (14)</a>
      </li>
      <li class="list-group-item">
        <a href="/archive/2015" onClick="gtag('event', 'link', {'event_category': 'archives','event_label': '2015'});">2015 Archive (19)</a>
      </li>
      <li class="list-group-item">
        <a href="/archive/2016" onClick="gtag('event', 'link', {'event_category': 'archives','event_label': '2016'});">2016 Archive (12)</a>
      </li>
      <li class="list-group-item">
        <a href="/archive/2017" onClick="gtag('event', 'link', {'event_category': 'archives','event_label': '2017'});">2017 Archive (19)</a>
      </li>
      <li class="list-group-item">
        <a href="/archive/2018" onClick="gtag('event', 'link', {'event_category': 'archives','event_label': '2018'});">2018 Archive (17)</a>
      </li>
      <li class="list-group-item">
        <a href="/archive/2019" onClick="gtag('event', 'link', {'event_category': 'archives','event_label': '2019'});">2019 Archive (20)</a>
      </li>
      <li class="list-group-item">
        <a href="/archive/2020" onClick="gtag('event', 'link', {'event_category': 'archives','event_label': '2020'});">2020 Archive (26)</a>
      </li>
      <li class="list-group-item">
        <a href="/archive/2021" onClick="gtag('event', 'link', {'event_category': 'archives','event_label': '2021'});">2021 Archive (40)</a>
      </li>
      <li class="list-group-item">
        <a href="/archive/2022" onClick="gtag('event', 'link', {'event_category': 'archives','event_label': '2022'});">2022 Archive (19)</a>
      </li>
      </ul>
  </div>
  <div class="sidebar-content custom-search">
    <h3>ã‚µã‚¤ãƒˆå†…æ¤œç´¢</h3>
    <div class="gcse-search"></div>
  </div>

  <div class="fixed-contents position-sticky">
    
    
    <div class="sidebar-content related-post">
      <h3>é–¢é€£ã™ã‚‹è¨˜äº‹</h3>
      <ul class="list-group">
        
        <li class="list-group-item"><a href="https://blog.mosuke.tech/entry/2022/02/08/argocd-deploy-to-external-cluster/" onClick="gtag('event', 'link', {'event_category': 'related-posts','event_label': 'Argo CDã€å¤–éƒ¨ã‚¯ãƒ©ã‚¹ã‚¿ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã¨èªè¨¼ã®ä»•çµ„ã¿'});">Argo CDã€å¤–éƒ¨ã‚¯ãƒ©ã‚¹ã‚¿ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã¨èªè¨¼ã®ä»•çµ„ã¿</a> (2022/02/08)</li>
        
        <li class="list-group-item"><a href="https://blog.mosuke.tech/entry/2022/01/20/openshift-project-scoped-nodeselector/" onClick="gtag('event', 'link', {'event_category': 'related-posts','event_label': 'OpenShiftã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¹ã‚³ãƒ¼ãƒ—ã®ãƒãƒ¼ãƒ‰ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã®æŒ™å‹•ç¢ºèª'});">OpenShiftã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¹ã‚³ãƒ¼ãƒ—ã®ãƒãƒ¼ãƒ‰ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã®æŒ™å‹•ç¢ºèª</a> (2022/01/20)</li>
        
        <li class="list-group-item"><a href="https://blog.mosuke.tech/entry/2021/12/28/openshift-router-sharding/" onClick="gtag('event', 'link', {'event_category': 'related-posts','event_label': 'OpenShiftã€Routerã‚·ãƒ£ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’ä½¿ã£ã¦ç”¨é€”ã”ã¨ã«ã‚¢ã‚¯ã‚»ã‚¹çµŒè·¯ã‚’åˆ†ã‘ã‚‹'});">OpenShiftã€Routerã‚·ãƒ£ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’ä½¿ã£ã¦ç”¨é€”ã”ã¨ã«ã‚¢ã‚¯ã‚»ã‚¹çµŒè·¯ã‚’åˆ†ã‘ã‚‹</a> (2021/12/28)</li>
        
        <li class="list-group-item"><a href="https://blog.mosuke.tech/entry/2021/12/22/openshift-ipi-limited-sourceip/" onClick="gtag('event', 'link', {'event_category': 'related-posts','event_label': 'OpenShiftã€é€ä¿¡å…ƒIPã‚¢ãƒ‰ãƒ¬ã‚¹ã§åˆ¶é™ãŒã‹ã‹ã£ãŸç’°å¢ƒã§ã®IPIã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®æ³¨æ„äº‹é …'});">OpenShiftã€é€ä¿¡å…ƒIPã‚¢ãƒ‰ãƒ¬ã‚¹ã§åˆ¶é™ãŒã‹ã‹ã£ãŸç’°å¢ƒã§ã®IPIã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®æ³¨æ„äº‹é …</a> (2021/12/22)</li>
        
      </ul>
    </div>
    

    
    <ins class="adsbygoogle"
    style="display:block"
    data-ad-client="ca-pub-2753210161325997"
    data-ad-slot="4759840302"
    data-ad-format="auto"
    data-full-width-responsive="true"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    
  </div>
</div>

                </div>
            </div>
        </main><footer class="container">
  <p class="float-right"><a href="#" class="btn btn-secondary">Back to top</a></p>
  <p>&copy; 2020 <strong>mosuke5</strong> All rights reserved.<br />Powered by hugo</p>
</footer>
        
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-99596316-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-99596316-1');
</script>
 
        <script async src="https://cse.google.com/cse.js?cx=012458736543810277235:x4juxtghjhg"></script>

        
        
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-2753210161325997",
            enable_page_level_ads: true
          });
        </script>
        
    </body>
</html>
